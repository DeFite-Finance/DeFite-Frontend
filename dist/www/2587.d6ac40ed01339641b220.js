(self.webpackChunkhugiris_nft=self.webpackChunkhugiris_nft||[]).push([[2587],{42052:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var r=t(85893),o=t(67294),i=t(77044),c=t(92375),a=t(58511);var s=()=>{const{activate:e}=(0,i.Ge)(),n=(0,c.T)(),{login:t}=(0,a.Z)();(0,o.useEffect)((()=>{localStorage.getItem("_iris_fintech_")&&t("useEagerConnect")}),[e,n,t])},u=t(25108);var l=(e=!1)=>{const{connector:n,active:t,error:r}=(0,i.Ge)(),c=localStorage.getItem("_iris_fintech_")??"",{login:s}=(0,a.Z)();(0,o.useEffect)((()=>{if(n&&n.on&&!t&&!r&&!e){const e=()=>{u.log("Handling 'connect' event"),s("useInactiveListener")},t=e=>{u.log("Handling 'chainChanged' event with payload",e),window.location.reload(),s("useInactiveListener")},r=e=>{u.log("Handling 'accountsChanged' event with payload",e),e.length>0&&s("useInactiveListener")},o=e=>{u.log("Handling 'networkChanged' event with payload",e),s("useInactiveListener")};return n.on("connect",e),n.on("chainChanged",t),n.on("accountsChanged",r),n.on("networkChanged",o),()=>{n.removeListener&&(n.removeListener("connect",e),n.removeListener("chainChanged",t),n.removeListener("accountsChanged",r),n.removeListener("networkChanged",o))}}}),[t,r,e,n,s,c])};var d=()=>{const e=(0,c.C)((e=>e.triedEager.tried));s(),l(!e)};const h=(0,o.lazy)((()=>Promise.all([t.e(4658),t.e(3738),t.e(944),t.e(813),t.e(9521),t.e(4912),t.e(9557),t.e(8384),t.e(2827),t.e(1715),t.e(9806),t.e(3278),t.e(1565),t.e(4735),t.e(4625),t.e(2329),t.e(6882),t.e(1106),t.e(5187),t.e(2972),t.e(4581),t.e(2506),t.e(8825),t.e(8490),t.e(1680),t.e(3964),t.e(7715),t.e(9842),t.e(5526),t.e(1771),t.e(8811),t.e(4211),t.e(2492),t.e(3923),t.e(483),t.e(9920),t.e(5457),t.e(7010),t.e(7219),t.e(8059),t.e(4245),t.e(3707),t.e(4962),t.e(3827)]).then(t.bind(t,93827)))),f=(0,o.lazy)((()=>Promise.all([t.e(4658),t.e(3738),t.e(944),t.e(813),t.e(9521),t.e(4912),t.e(9557),t.e(8384),t.e(2827),t.e(1715),t.e(9806),t.e(3278),t.e(1565),t.e(4735),t.e(4625),t.e(2329),t.e(6882),t.e(1106),t.e(5187),t.e(2972),t.e(4581),t.e(2506),t.e(8825),t.e(8490),t.e(1680),t.e(3964),t.e(7715),t.e(9842),t.e(5526),t.e(1771),t.e(8811),t.e(4211),t.e(2492),t.e(3923),t.e(483),t.e(9920),t.e(5457),t.e(7010),t.e(7219),t.e(8059),t.e(4245),t.e(3707),t.e(4962),t.e(9428)]).then(t.bind(t,29428)))),g=(0,o.lazy)((()=>t.e(1285).then(t.bind(t,1285)))),v=(0,o.lazy)((()=>Promise.all([t.e(4658),t.e(3738),t.e(944),t.e(813),t.e(9521),t.e(4912),t.e(9557),t.e(8384),t.e(2827),t.e(1715),t.e(9806),t.e(3278),t.e(1565),t.e(4735),t.e(4625),t.e(2329),t.e(6882),t.e(1106),t.e(5187),t.e(2972),t.e(4581),t.e(2506),t.e(8825),t.e(8490),t.e(1680),t.e(3964),t.e(7715),t.e(9842),t.e(5526),t.e(1771),t.e(8811),t.e(4211),t.e(2492),t.e(3923),t.e(483),t.e(9920),t.e(5457),t.e(7010),t.e(7219),t.e(8059),t.e(4245),t.e(3707),t.e(4962),t.e(5823)]).then(t.bind(t,5823)))),w=(0,o.lazy)((()=>t.e(6418).then(t.bind(t,66418))));var m=()=>(d(),(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{},void 0),(0,r.jsx)(g,{},void 0),(0,r.jsx)(h,{},void 0),(0,r.jsx)(f,{},void 0),(0,r.jsx)(w,{},void 0)]},void 0))},88476:function(e,n){"use strict";n.Z={chainId:"1",rpc_url1:"https://mainnet.infura.io/v3/3bb2facc1ba34c21ac433006dea3015d",rpc_url2:"https://mainnet.infura.io/v3/32cc1fd7fe8d4ad5aa6e4c2a18e90839",backend_url:"https://hugiris.de.r.appspot.com"}},58511:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(67294),o=t(77044),i=t(30950),c=t(83929),a=t(40782),s=t(92375),u=t(38658),l=t(42256),d=t(25108);var h=t(25108);var f=()=>{const e=(0,s.T)(),{active:n,connector:t,activate:f,deactivate:g}=(0,o.Ge)();n&&(t==a.Lj?localStorage.setItem("_iris_fintech_","Injected"):t==a.Lw&&localStorage.setItem("_iris_fintech_","WalletConnect"));const v=(0,r.useCallback)((()=>{e((0,u.IW)(!1)),g(),"WalletConnect"==localStorage.getItem("_iris_fintech_")&&a.Lw.handleDisconnect(),localStorage.removeItem("_iris_fintech_"),localStorage.removeItem("walletconnect")}),[g,e]);return{login:(0,r.useCallback)((n=>{var t;if("Injected"==n)t=a.Lj;else if("WalletConnect"==n)t=a.Lw;else{const e=localStorage.getItem("_iris_fintech_");"Injected"==e?t=a.Lj:"WalletConnect"==e&&(t=a.Lw)}t?f(t,(async n=>{if(n instanceof o.Uu)if(t==a.Lj){const n=await(async()=>{const e=window.ethereum;if(!e)return d.error("Can't setup the BSC network on metamask because window.ethereum is undefined"),!1;{const n=(0,l.nU)();try{try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${n.toString(16)}`}]}),!0}catch(t){if(4902!==t.code)return!1;try{return await e.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${n.toString(16)}`,chainName:"Ethereum Mainnet",nativeCurrency:{name:"ETH",symbol:"eth",decimals:18},rpcUrls:[(0,l.p1)()],blockExplorerUrls:["https://etherscan.io"]}]}),!0}catch(e){return d.error("add",e),!1}}}catch(e){return d.error("setup",e),!1}}})();n?f(t,void 0,!0).catch((()=>{e((0,u.IW)(!0))})):v()}else t==a.Lw&&(t.handleDisconnect(),v());else n instanceof i.A5?h.log("Provider Error","No provider was found"):n instanceof i.ab?h.log("Authorization Error","Please authorize to access your account"):n instanceof c.ab?(t.handleDisconnect(),h.log("Authorization Error","Please authorize to access your account")):h.log(n.name,n.message),v()})).catch((()=>{e((0,u.IW)(!0)),v()})):(h.log("Can't find connector","The connector config is wrong"),v())}),[f,e,v]),logout:v}}},92375:function(e,n,t){"use strict";t.d(n,{T:function(){return o},C:function(){return i}});var r=t(23594);const o=()=>(0,r.I0)(),i=r.v9},38658:function(e,n,t){"use strict";t.d(n,{IW:function(){return o}});const r=(0,t(29829).oM)({name:"triedEager",initialState:{tried:!1},reducers:{setState:(e,n)=>{e.tried=n.payload}}}),{setState:o}=r.actions;n.ZP=r.reducer},40782:function(e,n,t){"use strict";t.d(n,{Lj:function(){return l},Lw:function(){return d},av:function(){return h}});var r=t(30950),o=t(83929),i=t(3283),c=t.n(i),a=t(42256);const s=(0,a.p1)(),u=(0,a.nU)();if(void 0===s)throw new Error("URL Type Error: should be string");if(NaN===u)throw new Error("Invalid Numneric Error: should be a valid number");const l=new r._k({supportedChainIds:[u]});l.handleChainChanged=e=>{if(e!=u)return localStorage.removeItem("_iris_fintech_"),void l.emitDeactivate();l.emitUpdate({chainId:e,provider:window.BinanceChain}),window.location.reload()};const d=new o.zw({rpc:{1:s},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:12e3}),h=e=>new(c())(e)},42256:function(e,n,t){"use strict";t.d(n,{p1:function(){return a},nU:function(){return u}});var r=t(95534),o=t.n(r),i=t(88476);if(!i.Z.rpc_url1||!i.Z.rpc_url2)throw Error("ETH_RPC_URLs is undefined");const c=[i.Z.rpc_url1,i.Z.rpc_url2],a=()=>{const e=o()(c);if(void 0!==e)return e};if(void 0===i.Z.chainId)throw new Error("BSC_CHAIN_ID is undefined");const s=i.Z.chainId,u=()=>parseInt(s,10)},62859:function(){},75304:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},96419:function(){},56353:function(){},69386:function(){},31616:function(){},29120:function(){},46586:function(){},6567:function(){},71408:function(){},23646:function(){},43503:function(){},33557:function(){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU4Ny5kNmFjNDBlZDAxMzM5NjQxYjIyMC5qcyIsIm1hcHBpbmdzIjoieU5BbUJBLE1BZHdCLEtBQ3BCLE1BQU0sU0FBRUEsSUFBYSxVQUNmQyxHQUFXLFVBQ1gsTUFBRUMsSUFBVSxFQUFBQyxFQUFBLE1BRWxCLElBQUFDLFlBQVUsS0FDbUJDLGFBQWFDLFFBQVEsbUJBRzFDSixFQUFNLHFCQUVYLENBQUNGLEVBQVVDLEVBQVVDLEssV0NnQzVCLE1BNUM0QixDQUFDSyxHQUFvQixLQUM3QyxNQUFNLFVBQUVDLEVBQVMsT0FBRUMsRUFBTSxNQUFFQyxJQUFVLFVBQy9CQyxFQUFrQk4sYUFBYUMsUUFBUSxtQkFBcUIsSUFDNUQsTUFBRUosSUFBVSxFQUFBQyxFQUFBLE1BRWxCLElBQUFDLFlBQVUsS0FDTixHQUFJSSxHQUFhQSxFQUFVSSxLQUFPSCxJQUFXQyxJQUFVSCxFQUFVLENBQzdELE1BQU1NLEVBQWdCLEtBQ2xCQyxFQUFRQyxJQUFJLDRCQUNaYixFQUFNLHdCQUVKYyxFQUFzQkMsSUFDeEJILEVBQVFDLElBQUksNkNBQThDRSxHQUMxREMsT0FBT0MsU0FBU0MsU0FDaEJsQixFQUFNLHdCQUVKbUIsRUFBeUJDLElBQzNCUixFQUFRQyxJQUFJLGdEQUFpRE8sR0FDekRBLEVBQVNDLE9BQVMsR0FDbEJyQixFQUFNLHdCQUdSc0IsRUFBd0JDLElBQzFCWCxFQUFRQyxJQUFJLCtDQUFnRFUsR0FDNUR2QixFQUFNLHdCQVFWLE9BTEFNLEVBQVVJLEdBQUcsVUFBV0MsR0FDeEJMLEVBQVVJLEdBQUcsZUFBZ0JJLEdBQzdCUixFQUFVSSxHQUFHLGtCQUFtQlMsR0FDaENiLEVBQVVJLEdBQUcsaUJBQWtCWSxHQUV4QixLQUNDaEIsRUFBVWtCLGlCQUNWbEIsRUFBVWtCLGVBQWUsVUFBV2IsR0FDcENMLEVBQVVrQixlQUFlLGVBQWdCVixHQUN6Q1IsRUFBVWtCLGVBQWUsa0JBQW1CTCxHQUM1Q2IsRUFBVWtCLGVBQWUsaUJBQWtCRixRQUl4RCxDQUFDZixFQUFRQyxFQUFPSCxFQUFVQyxFQUFXTixFQUFPUyxLQy9CbkQsTUFWc0IsS0FDbEIsTUFBTWdCLEdBQWEsUUFBZ0JDLEdBQVVBLEVBQU1ELFdBQVdFLFFBRzlELElBR0EsR0FBcUJGLElDVHpCLE1BQU1HLEdBQU8sSUFBQUMsT0FBSyxJQUFNLDRkQUNsQkMsR0FBYyxJQUFBRCxPQUFLLElBQU0sNGRBQ3pCRSxHQUFTLElBQUFGLE9BQUssSUFBTSxpQ0FDcEJHLEdBQVMsSUFBQUgsT0FBSyxJQUFNLDJkQUNwQkksR0FBUyxJQUFBSixPQUFLLElBQU0sa0NBcUIxQixNQWZZLEtBQ1IsS0FHSSw0QkFDSSxTQUFDRyxFQUFNLFlBQ1AsU0FBQ0QsRUFBTSxZQUNQLFNBQUNILEVBQUksWUFDTCxTQUFDRSxFQUFXLFlBRVosU0FBQ0csRUFBTSxrQkFBRyxLLGlDQ0R0QixJQVJlLENBQ1hsQixRQUFTLElBQ1RtQixTQUFVLGdFQUNWQyxTQUFVLGdFQUVWQyxZQUFhLHFDLHlMQ29GakIsTUF0RmdCLEtBQ1osTUFBTXJDLEdBQVcsVUFDWCxPQUFFUSxFQUFNLFVBQUVELEVBQVMsU0FBRVIsRUFBUSxXQUFFdUMsSUFBZSxVQUVoRDlCLElBQ0lELEdBQWEsS0FDYkgsYUFBYW1DLFFBQVEsaUJBQWtCLFlBQ2hDaEMsR0FBYSxNQUNwQkgsYUFBYW1DLFFBQVEsaUJBQWtCLGtCQUkvQyxNQUFNQyxHQUFTLElBQUFDLGNBQVksS0FDdkJ6QyxHQUFTLFNBQVMsSUFDbEJzQyxJQUU4QyxpQkFBMUNsQyxhQUFhQyxRQUFRLG1CQUNwQix3QkFHTEQsYUFBYXNDLFdBQVcsa0JBQ3hCdEMsYUFBYXNDLFdBQVcsbUJBQ3pCLENBQUNKLEVBQVl0QyxJQTZEaEIsTUFBTyxDQUFFQyxPQTNESyxJQUFBd0MsY0FDVEUsSUFDRyxJQUFJQyxFQUNKLEdBQW1CLFlBQWZELEVBQ0FDLEVBQW1CLFVBQ2hCLEdBQW1CLGlCQUFmRCxFQUNQQyxFQUFtQixTQUNoQixDQUNILE1BQU1DLEVBQWdCekMsYUFBYUMsUUFBUSxrQkFDdEIsWUFBakJ3QyxFQUNBRCxFQUFtQixLQUNLLGlCQUFqQkMsSUFDUEQsRUFBbUIsTUFJdkJBLEVBQ0E3QyxFQUFTNkMsR0FBa0JFLE1BQU9yQyxJQUM5QixHQUFJQSxhQUFpQixLQUNqQixHQUFJbUMsR0FBb0IsS0FBVSxDQUM5QixNQUFNRyxPQzFETkQsV0FDeEIsTUFBTUUsRUFBVy9CLE9BQU9nQyxTQUV4QixJQUFJRCxFQTZDQSxPQURBbkMsRUFBUUosTUFBTSxpRkFDUCxFQTdDRyxDQUNWLE1BQU1PLEdBQVUsVUFDaEIsSUFDSSxJQUtJLGFBSk1nQyxFQUFTRSxRQUFRLENBQ25CQyxPQUFRLDZCQUNSQyxPQUFRLENBQUMsQ0FBRXBDLFFBQVMsS0FBS0EsRUFBUXFDLFNBQVMsV0FFdkMsRUFDVCxNQUFPQyxHQUVMLEdBQWtDLE9BQTdCQSxFQUFvQkMsS0F5QnJCLE9BQU8sRUF4QlAsSUFpQkksYUFoQk1QLEVBQVNFLFFBQVEsQ0FDbkJDLE9BQVEsMEJBQ1JDLE9BQVEsQ0FDSixDQUNJcEMsUUFBUyxLQUFLQSxFQUFRcUMsU0FBUyxNQUMvQkcsVUFBVyxtQkFDWEMsZUFBZ0IsQ0FDWkMsS0FBTSxNQUNOQyxPQUFRLE1BQ1JDLFNBQVUsSUFFZEMsUUFBUyxFQUFDLEVBQUFDLEVBQUEsT0FDVkMsa0JBQW1CLENBQUMsNkJBSXpCLEVBQ1QsTUFBT0MsR0FHTCxPQURBbkQsRUFBUUosTUFBTSxNQUFPdUQsSUFDZCxJQU1yQixNQUFPdkQsR0FFTCxPQURBSSxFQUFRSixNQUFNLFFBQVNBLElBQ2hCLEtEY2dDd0QsR0FFbkJsQixFQUNBaEQsRUFBUzZDLE9BQWtCc0IsR0FBVyxHQUFNQyxPQUFNLEtBQzlDbkUsR0FBUyxTQUFTLE9BR3RCd0MsU0FFR0ksR0FBb0IsT0FDM0JBLEVBQWlCd0IsbUJBRWpCNUIsVUFHQS9CLGFBQWlCLEtBQ2pCLEVBQVFLLElBQUksaUJBQWtCLHlCQUN2QkwsYUFBaUIsS0FDeEIsRUFBUUssSUFBSSxzQkFBdUIsMkNBQzVCTCxhQUFpQixNQUN4Qm1DLEVBQWlCd0IsbUJBQ2pCLEVBQVF0RCxJQUFJLHNCQUF1Qiw0Q0FFbkMsRUFBUUEsSUFBSUwsRUFBTWlELEtBQU1qRCxFQUFNNEQsU0FFbEM3QixPQUVMMkIsT0FBTSxLQUNMbkUsR0FBUyxTQUFTLElBQ2xCd0MsUUFHSixFQUFRMUIsSUFBSSx1QkFBd0IsaUNBQ3BDMEIsT0FHUixDQUFDekMsRUFBVUMsRUFBVXdDLElBR1RBLE9BQUFBLEsseUdFL0ZiLE1BQU04QixFQUFpQixLQUFNLFVBQ3ZCQyxFQUFrRCxNLG9FQ0h4RCxNQUFNQyxHQUFrQixFLFNBQUEsSUFBWSxDQUN2Q2QsS0FBTSxhQUNOZSxhQUFjLENBQ1Y3QyxPQUFPLEdBRVg4QyxTQUFVLENBQ05DLFNBQVUsQ0FBQ2hELEVBQU9pRCxLQUNkakQsRUFBTUMsTUFBUWdELEVBQU9DLGFBTXBCLFNBQUVGLEdBQWFILEVBQWdCTSxRQUU1QyxLQUFlTixFQUF1QixTLDRLQ1B0QyxNQUFNTyxHQUE4QixVQUM5QkMsR0FBbUIsVUFHekIsUUFBZ0JkLElBQVphLEVBQ0EsTUFBTSxJQUFJRSxNQUFNLG9DQUlwQixHQUFpQkMsTUFBYkYsRUFDQSxNQUFNLElBQUlDLE1BQU0sb0RBSWIsTUFBTUUsRUFBVyxJQUFJLEtBQWtCLENBQzFDQyxrQkFBbUIsQ0FBQ0osS0FJeEJHLEVBQVNwRSxtQkFBc0JzRSxJQUMzQixHQUFJQSxHQUFjTCxFQU1kLE9BTEE1RSxhQUFhc0MsV0FBVyx1QkFHeEJ5QyxFQUFTRyxpQkFNYkgsRUFBU0ksV0FBVyxDQUFFdkUsUUFBU3FFLEVBQVlyQyxTQUFVL0IsT0FBT3VFLGVBRTVEdkUsT0FBT0MsU0FBU0MsVUFJcEIsTUFFYXNFLEVBQWdCLElBQUksS0FBdUIsQ0FDcERDLElBQUssQ0FBRSxFQUFHWCxHQUNWWSxPQUFRLG1DQUNSQyxRQUFRLEVBQ1JDLGdCQU5xQixPQVVaQyxFQUFjOUMsR0FDUCxJQUFJLElBQUosQ0FBU0EsSSwrSENyRDdCLElBQUssZUFBb0IsYUFDckIsTUFBTWlDLE1BQU0sNkJBSVQsTUFBTWMsRUFBWSxDQUFDLGFBQWlCLGNBRXJDQyxFQUFnQixLQUVsQixNQUFNQyxFQUFNLElBQU9GLEdBR25CLFFBQVk3QixJQUFSK0IsRUFLSixPQUFPQSxHQUlYLFFBQXVCL0IsSUFBbkIsWUFDQSxNQUFNLElBQUllLE1BQU0sNkJBR3BCLE1BQU1pQixFQUFVLFlBRVZDLEVBQWEsSUFDUkMsU0FBU0YsRUFBUyxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvaG9va3MvdXNlRWFnZXJDb25uZWN0LnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9ob29rcy91c2VJbmFjdGl2ZUxpc3RlbmVyLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy91dGlscy9iYXNlQ29ubmVjdGlvbi50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvQXBwLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9jb25maWcudHN4Iiwid2VicGFjazovL2h1Z2lyaXMtbmZ0Ly4vc3JjL2hvb2tzL3VzZUF1dGgudHN4Iiwid2VicGFjazovL2h1Z2lyaXMtbmZ0Ly4vc3JjL2hvb2tzL3dhbGxldFRva2VuTmV0d29yay50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvcmVkdXgvaG9vay50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvcmVkdXgvdHJpZWRFYWdlci50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvdXRpbHMvY29ubmVjdG9ycy50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvdXRpbHMvZ2V0UlBDLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VXZWIzUmVhY3QgfSBmcm9tICdAd2ViMy1yZWFjdC9jb3JlJztcbmltcG9ydCB7IHVzZUFwcERpc3BhdGNoIH0gZnJvbSAnLi4vcmVkdXgvaG9vayc7XG5pbXBvcnQgdXNlQXV0aCBmcm9tICcuL3VzZUF1dGgnO1xuXG5jb25zdCB1c2VFYWdlckNvbm5lY3QgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBhY3RpdmF0ZSB9ID0gdXNlV2ViM1JlYWN0KCk7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICAgIGNvbnN0IHsgbG9naW4gfSA9IHVzZUF1dGgoKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbm5lY2V0ZWRXYWxsZXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnX2lyaXNfZmludGVjaF8nKTtcblxuICAgICAgICBpZiAoY29ubmVjZXRlZFdhbGxldCkge1xuICAgICAgICAgICAgbG9naW4oJ3VzZUVhZ2VyQ29ubmVjdCcpO1xuICAgICAgICB9XG4gICAgfSwgW2FjdGl2YXRlLCBkaXNwYXRjaCwgbG9naW5dKTsgLy8gaW50ZW50aW9uYWxseSBvbmx5IHJ1bm5pbmcgb24gbW91bnQgKG1ha2Ugc3VyZSBpdCdzIG9ubHkgbW91bnRlZCBvbmNlIDopKVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlRWFnZXJDb25uZWN0O1xuIiwiaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlV2ViM1JlYWN0IH0gZnJvbSAnQHdlYjMtcmVhY3QvY29yZSc7XG5pbXBvcnQgdXNlQXV0aCBmcm9tICcuL3VzZUF1dGgnO1xuXG5jb25zdCB1c2VJbmFjdGl2ZUxpc3RlbmVyID0gKHN1cHByZXNzOiBib29sZWFuID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCB7IGNvbm5lY3RvciwgYWN0aXZlLCBlcnJvciB9ID0gdXNlV2ViM1JlYWN0KCk7XG4gICAgY29uc3QgY29ubmVjdGVkV2FsbGV0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ19pcmlzX2ZpbnRlY2hfJykgPz8gJyc7XG4gICAgY29uc3QgeyBsb2dpbiB9ID0gdXNlQXV0aCgpO1xuXG4gICAgdXNlRWZmZWN0KCgpOiBhbnkgPT4ge1xuICAgICAgICBpZiAoY29ubmVjdG9yICYmIGNvbm5lY3Rvci5vbiAmJiAhYWN0aXZlICYmICFlcnJvciAmJiAhc3VwcHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNvbm5lY3QgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyAnY29ubmVjdCcgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgbG9naW4oJ3VzZUluYWN0aXZlTGlzdGVuZXInKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVDaGFpbkNoYW5nZWQgPSAoY2hhaW5JZDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyAnY2hhaW5DaGFuZ2VkJyBldmVudCB3aXRoIHBheWxvYWRcIiwgY2hhaW5JZCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIGxvZ2luKCd1c2VJbmFjdGl2ZUxpc3RlbmVyJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlQWNjb3VudHNDaGFuZ2VkID0gKGFjY291bnRzOiBzdHJpbmdbXSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSGFuZGxpbmcgJ2FjY291bnRzQ2hhbmdlZCcgZXZlbnQgd2l0aCBwYXlsb2FkXCIsIGFjY291bnRzKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjb3VudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsb2dpbigndXNlSW5hY3RpdmVMaXN0ZW5lcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVOZXR3b3JrQ2hhbmdlZCA9IChuZXR3b3JrSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSGFuZGxpbmcgJ25ldHdvcmtDaGFuZ2VkJyBldmVudCB3aXRoIHBheWxvYWRcIiwgbmV0d29ya0lkKTtcbiAgICAgICAgICAgICAgICBsb2dpbigndXNlSW5hY3RpdmVMaXN0ZW5lcicpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29ubmVjdG9yLm9uKCdjb25uZWN0JywgaGFuZGxlQ29ubmVjdCk7XG4gICAgICAgICAgICBjb25uZWN0b3Iub24oJ2NoYWluQ2hhbmdlZCcsIGhhbmRsZUNoYWluQ2hhbmdlZCk7XG4gICAgICAgICAgICBjb25uZWN0b3Iub24oJ2FjY291bnRzQ2hhbmdlZCcsIGhhbmRsZUFjY291bnRzQ2hhbmdlZCk7XG4gICAgICAgICAgICBjb25uZWN0b3Iub24oJ25ldHdvcmtDaGFuZ2VkJywgaGFuZGxlTmV0d29ya0NoYW5nZWQpO1xuXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjb25uZWN0b3IucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yLnJlbW92ZUxpc3RlbmVyKCdjb25uZWN0JywgaGFuZGxlQ29ubmVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvci5yZW1vdmVMaXN0ZW5lcignY2hhaW5DaGFuZ2VkJywgaGFuZGxlQ2hhaW5DaGFuZ2VkKTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yLnJlbW92ZUxpc3RlbmVyKCdhY2NvdW50c0NoYW5nZWQnLCBoYW5kbGVBY2NvdW50c0NoYW5nZWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3IucmVtb3ZlTGlzdGVuZXIoJ25ldHdvcmtDaGFuZ2VkJywgaGFuZGxlTmV0d29ya0NoYW5nZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LCBbYWN0aXZlLCBlcnJvciwgc3VwcHJlc3MsIGNvbm5lY3RvciwgbG9naW4sIGNvbm5lY3RlZFdhbGxldF0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlSW5hY3RpdmVMaXN0ZW5lcjtcbiIsImltcG9ydCB1c2VFYWdlckNvbm5lY3QgZnJvbSAnLi4vaG9va3MvdXNlRWFnZXJDb25uZWN0JztcbmltcG9ydCB1c2VJbmFjdGl2ZUxpc3RlbmVyIGZyb20gJy4uL2hvb2tzL3VzZUluYWN0aXZlTGlzdGVuZXInO1xuaW1wb3J0IHsgdXNlQXBwU2VsZWN0b3IgfSBmcm9tICcuLi9yZWR1eC9ob29rJztcblxuY29uc3QgQmFzZUNvbm5lY3RvciA9ICgpID0+IHtcbiAgICBjb25zdCB0cmllZEVhZ2VyID0gdXNlQXBwU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS50cmllZEVhZ2VyLnRyaWVkKTtcblxuICAgIC8vIGhhbmRsZSBsb2dpYyB0byBlYWdlcmx5IGNvbm5lY3QgdG8gdGhlIGluamVjdGVkIGV0aGVyZXVtIHByb3ZpZGVyLCBpZiBpdCBleGlzdHMgYW5kIGhhcyBncmFudGVkIGFjY2VzcyBhbHJlYWR5XG4gICAgdXNlRWFnZXJDb25uZWN0KCk7XG5cbiAgICAvLyBoYW5kbGUgbG9naWMgdG8gY29ubmVjdCBpbiByZWFjdGlvbiB0byBjZXJ0YWluIGV2ZW50cyBvbiB0aGUgaW5qZWN0ZWQgZXRoZXJldW0gcHJvdmlkZXIsIGlmIGl0IGV4aXN0c1xuICAgIHVzZUluYWN0aXZlTGlzdGVuZXIoIXRyaWVkRWFnZXIpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQmFzZUNvbm5lY3RvcjtcbiIsImltcG9ydCBSZWFjdCwgeyBsYXp5IH0gZnJvbSAncmVhY3QnO1xuXG5jb25zdCBNYWluID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vY29tcG9uZW50cy9NYWluJykpO1xuY29uc3QgV2FsbGV0TW9kYWwgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9jb21wb25lbnRzL1dhbGxldE1vZGFsJykpO1xuY29uc3QgUm91dGVzID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vcm91dGUnKSk7XG5jb25zdCBIZWFkZXIgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9jb21wb25lbnRzL0hlYWRlcicpKTtcbmNvbnN0IEZvb3RlciA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvRm9vdGVyL0Zvb3RlcicpKTtcblxuLy8gY29uc3QgQWNjb3VudCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvQWNjb3VudCcpKTtcblxuaW1wb3J0IEJhc2VDb25uZWN0b3IgZnJvbSAnLi91dGlscy9iYXNlQ29ubmVjdGlvbic7XG5cbmNvbnN0IEFwcCA9ICgpID0+IHtcbiAgICBCYXNlQ29ubmVjdG9yKCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEhlYWRlciAvPlxuICAgICAgICAgICAgPFJvdXRlcyAvPlxuICAgICAgICAgICAgPE1haW4gLz5cbiAgICAgICAgICAgIDxXYWxsZXRNb2RhbCAvPlxuICAgICAgICAgICAgey8qIDxBY2NvdW50IC8+ICovfVxuICAgICAgICAgICAgPEZvb3RlciAvPlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQXBwO1xuIiwiLy8gcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKCFwcm9jZXNzLmVudi5SRUFDVF9BUFBfRVRIX01BSU5ORVRfUlBDX1VSTF8xIHx8ICFwcm9jZXNzLmVudi5SRUFDVF9BUFBfRVRIX01BSU5ORVRfUlBDX1VSTF8yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgUlBDIHVybCEhJyk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gICAgaWYgKCFwcm9jZXNzLmVudi5SRUFDVF9BUFBfQkFDS0VORF9VUkwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBiYWNrZW5kIHVybCEhJyk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG59XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgICBjaGFpbklkOiBwcm9jZXNzLmVudi5SRUFDVF9BUFBfRVRIX01BSU5ORVRfQ0hBSU5fSUQgfHwgJzEnLFxuICAgIHJwY191cmwxOiBwcm9jZXNzLmVudi5SRUFDVF9BUFBfRVRIX01BSU5ORVRfUlBDX1VSTF8xIHx8ICcnLFxuICAgIHJwY191cmwyOiBwcm9jZXNzLmVudi5SRUFDVF9BUFBfRVRIX01BSU5ORVRfUlBDX1VSTF8yIHx8ICcnLFxuXG4gICAgYmFja2VuZF91cmw6IHByb2Nlc3MuZW52LlJFQUNUX0FQUF9CQUNLRU5EX1VSTCB8fCAnJyxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcbiIsIi8vIGltcG9ydCBuZWNlc3NhcnkgbGlicmFyeVxuaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VXZWIzUmVhY3QsIFVuc3VwcG9ydGVkQ2hhaW5JZEVycm9yIH0gZnJvbSAnQHdlYjMtcmVhY3QvY29yZSc7XG5pbXBvcnQge1xuICAgIE5vRXRoZXJldW1Qcm92aWRlckVycm9yLFxuICAgIFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvciBhcyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3JJbmplY3RlZCxcbn0gZnJvbSAnQHdlYjMtcmVhY3QvaW5qZWN0ZWQtY29ubmVjdG9yJztcblxuaW1wb3J0IHsgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yIGFzIFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvcldhbGxldENvbm5lY3QgfSBmcm9tICdAd2ViMy1yZWFjdC93YWxsZXRjb25uZWN0LWNvbm5lY3Rvcic7XG5cbi8vIGltcG9ydCBsb2NhbCBjb21wb25lbnRzXG5pbXBvcnQgeyBpbmplY3RlZCwgd2FsbGV0Y29ubmVjdCB9IGZyb20gJy4uL3V0aWxzL2Nvbm5lY3RvcnMnO1xuaW1wb3J0IHsgdXNlQXBwRGlzcGF0Y2ggfSBmcm9tICcuLi9yZWR1eC9ob29rJztcbmltcG9ydCB7IHNldFN0YXRlIH0gZnJvbSAnLi4vcmVkdXgvdHJpZWRFYWdlcic7XG5pbXBvcnQgeyBzZXR1cE5ldHdvcmsgfSBmcm9tICcuL3dhbGxldFRva2VuTmV0d29yayc7XG5cbmNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XG4gICAgY29uc3QgZGlzcGF0Y2ggPSB1c2VBcHBEaXNwYXRjaCgpO1xuICAgIGNvbnN0IHsgYWN0aXZlLCBjb25uZWN0b3IsIGFjdGl2YXRlLCBkZWFjdGl2YXRlIH0gPSB1c2VXZWIzUmVhY3QoKTtcblxuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgaWYgKGNvbm5lY3RvciA9PSBpbmplY3RlZCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19pcmlzX2ZpbnRlY2hfJywgJ0luamVjdGVkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29ubmVjdG9yID09IHdhbGxldGNvbm5lY3QpIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdfaXJpc19maW50ZWNoXycsICdXYWxsZXRDb25uZWN0Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBsb2dvdXQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIGRpc3BhdGNoKHNldFN0YXRlKGZhbHNlKSk7XG4gICAgICAgIGRlYWN0aXZhdGUoKTtcblxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ19pcmlzX2ZpbnRlY2hfJykgPT0gJ1dhbGxldENvbm5lY3QnKSB7XG4gICAgICAgICAgICAod2FsbGV0Y29ubmVjdCBhcyBhbnkpLmhhbmRsZURpc2Nvbm5lY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdfaXJpc19maW50ZWNoXycpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnd2FsbGV0Y29ubmVjdCcpO1xuICAgIH0sIFtkZWFjdGl2YXRlLCBkaXNwYXRjaF0pO1xuXG4gICAgY29uc3QgbG9naW4gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKGNvbm5lY3RvcklkKSA9PiB7XG4gICAgICAgICAgICB2YXIgY3VycmVudENvbm5lY3RvcjogYW55O1xuICAgICAgICAgICAgaWYgKGNvbm5lY3RvcklkID09ICdJbmplY3RlZCcpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29ubmVjdG9yID0gaW5qZWN0ZWQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbm5lY3RvcklkID09ICdXYWxsZXRDb25uZWN0Jykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IgPSB3YWxsZXRjb25uZWN0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0b3JUeXBlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ19pcmlzX2ZpbnRlY2hfJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3RvclR5cGUgPT0gJ0luamVjdGVkJykge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29ubmVjdG9yID0gaW5qZWN0ZWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb25uZWN0b3JUeXBlID09ICdXYWxsZXRDb25uZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29ubmVjdG9yID0gd2FsbGV0Y29ubmVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50Q29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGUoY3VycmVudENvbm5lY3RvciwgYXN5bmMgKGVycm9yOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBVbnN1cHBvcnRlZENoYWluSWRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb25uZWN0b3IgPT0gaW5qZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNTZXR1cCA9IGF3YWl0IHNldHVwTmV0d29yaygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1NldHVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlKGN1cnJlbnRDb25uZWN0b3IsIHVuZGVmaW5lZCwgdHJ1ZSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0U3RhdGUodHJ1ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRDb25uZWN0b3IgPT0gd2FsbGV0Y29ubmVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IuaGFuZGxlRGlzY29ubmVjdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBOb0V0aGVyZXVtUHJvdmlkZXJFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm92aWRlciBFcnJvcicsICdObyBwcm92aWRlciB3YXMgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3JJbmplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdXRob3JpemF0aW9uIEVycm9yJywgJ1BsZWFzZSBhdXRob3JpemUgdG8gYWNjZXNzIHlvdXIgYWNjb3VudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvcldhbGxldENvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29ubmVjdG9yLmhhbmRsZURpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQXV0aG9yaXphdGlvbiBFcnJvcicsICdQbGVhc2UgYXV0aG9yaXplIHRvIGFjY2VzcyB5b3VyIGFjY291bnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubmFtZSwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goc2V0U3RhdGUodHJ1ZSkpO1xuICAgICAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW4ndCBmaW5kIGNvbm5lY3RvclwiLCAnVGhlIGNvbm5lY3RvciBjb25maWcgaXMgd3JvbmcnKTtcbiAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW2FjdGl2YXRlLCBkaXNwYXRjaCwgbG9nb3V0XSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHsgbG9naW4sIGxvZ291dCB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdXNlQXV0aDtcbiIsImltcG9ydCB7IGdldENoYWluSUQsIGdldFJQQ05vZGVVcmwgfSBmcm9tICcuLi91dGlscy9nZXRSUEMnO1xuXG5leHBvcnQgY29uc3Qgc2V0dXBOZXR3b3JrID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gd2luZG93LmV0aGVyZXVtO1xuXG4gICAgaWYgKHByb3ZpZGVyKSB7XG4gICAgICAgIGNvbnN0IGNoYWluSWQgPSBnZXRDaGFpbklEKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLnJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogW3sgY2hhaW5JZDogYDB4JHtjaGFpbklkLnRvU3RyaW5nKDE2KX1gIH1dLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoc3dpdGNoRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGVycm9yIGNvZGUgaW5kaWNhdGVzIHRoYXQgdGhlIGNoYWluIGhhcyBub3QgYmVlbiBhZGRlZCB0byBNZXRhTWFzay5cbiAgICAgICAgICAgICAgICBpZiAoKHN3aXRjaEVycm9yIGFzIGFueSkuY29kZSA9PT0gNDkwMikge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnd2FsbGV0X2FkZEV0aGVyZXVtQ2hhaW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBgMHgke2NoYWluSWQudG9TdHJpbmcoMTYpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbk5hbWU6ICdFdGhlcmV1bSBNYWlubmV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZUN1cnJlbmN5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0VUSCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnZXRoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogMTgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnBjVXJsczogW2dldFJQQ05vZGVVcmwoKV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0V4cGxvcmVyVXJsczogWydodHRwczovL2V0aGVyc2Nhbi5pbyddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChhZGRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIFwiYWRkXCIgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2FkZCcsIGFkZEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzZXR1cCcsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDYW4ndCBzZXR1cCB0aGUgQlNDIG5ldHdvcmsgb24gbWV0YW1hc2sgYmVjYXVzZSB3aW5kb3cuZXRoZXJldW0gaXMgdW5kZWZpbmVkXCIpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVG9rZW4gPSBhc3luYyAoXG4gICAgdG9rZW5BZGRyZXNzOiBzdHJpbmcsXG4gICAgdG9rZW5TeW1ib2w6IHN0cmluZyxcbiAgICB0b2tlbkRlY2ltYWxzOiBudW1iZXIsXG4gICAgdG9rZW5JbWFnZTogc3RyaW5nLFxuKSA9PiB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSB3aW5kb3cuZXRoZXJldW07XG5cbiAgICBjb25zdCB0b2tlbkFkZGVkID0gYXdhaXQgKHByb3ZpZGVyIGFzIGFueSkucmVxdWVzdCh7XG4gICAgICAgIG1ldGhvZDogJ3dhbGxldF93YXRjaEFzc2V0JyxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICB0eXBlOiAnRVJDMjAnLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHRva2VuQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBzeW1ib2w6IHRva2VuU3ltYm9sLFxuICAgICAgICAgICAgICAgIGRlY2ltYWxzOiB0b2tlbkRlY2ltYWxzLFxuICAgICAgICAgICAgICAgIGltYWdlOiB0b2tlbkltYWdlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB0b2tlbkFkZGVkO1xufTtcbiIsImltcG9ydCB7IFR5cGVkVXNlU2VsZWN0b3JIb29rLCB1c2VEaXNwYXRjaCwgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQgdHlwZSB7IFJvb3RTdGF0ZSwgQXBwRGlzcGF0Y2ggfSBmcm9tICcuL3N0b3JlJztcblxuLy8gVXNlIHRocm91Z2hvdXQgeW91ciBhcHAgaW5zdGVhZCBvZiBwbGFpbiBgdXNlRGlzcGF0Y2hgIGFuZCBgdXNlU2VsZWN0b3JgXG5leHBvcnQgY29uc3QgdXNlQXBwRGlzcGF0Y2ggPSAoKSA9PiB1c2VEaXNwYXRjaDxBcHBEaXNwYXRjaD4oKTtcbmV4cG9ydCBjb25zdCB1c2VBcHBTZWxlY3RvcjogVHlwZWRVc2VTZWxlY3Rvckhvb2s8Um9vdFN0YXRlPiA9IHVzZVNlbGVjdG9yO1xuIiwiaW1wb3J0IHsgY3JlYXRlU2xpY2UsIFBheWxvYWRBY3Rpb24gfSBmcm9tICdAcmVkdXhqcy90b29sa2l0JztcblxuZXhwb3J0IGNvbnN0IHRyaWVkRWFnZXJTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgICBuYW1lOiAndHJpZWRFYWdlcicsXG4gICAgaW5pdGlhbFN0YXRlOiB7XG4gICAgICAgIHRyaWVkOiBmYWxzZSxcbiAgICB9LFxuICAgIHJlZHVjZXJzOiB7XG4gICAgICAgIHNldFN0YXRlOiAoc3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxib29sZWFuPikgPT4ge1xuICAgICAgICAgICAgc3RhdGUudHJpZWQgPSBhY3Rpb24ucGF5bG9hZDtcbiAgICAgICAgfSxcbiAgICB9LFxufSk7XG5cbi8vIEFjdGlvbiBjcmVhdG9ycyBhcmUgZ2VuZXJhdGVkIGZvciBlYWNoIGNhc2UgcmVkdWNlciBmdW5jdGlvblxuZXhwb3J0IGNvbnN0IHsgc2V0U3RhdGUgfSA9IHRyaWVkRWFnZXJTbGljZS5hY3Rpb25zO1xuXG5leHBvcnQgZGVmYXVsdCB0cmllZEVhZ2VyU2xpY2UucmVkdWNlcjtcbiIsIi8vIExpYnJhcnkgSW1wb3J0XG5pbXBvcnQgeyBJbmplY3RlZENvbm5lY3RvciB9IGZyb20gJ0B3ZWIzLXJlYWN0L2luamVjdGVkLWNvbm5lY3Rvcic7XG5pbXBvcnQgeyBXYWxsZXRDb25uZWN0Q29ubmVjdG9yIH0gZnJvbSAnQHdlYjMtcmVhY3Qvd2FsbGV0Y29ubmVjdC1jb25uZWN0b3InO1xuaW1wb3J0IFdlYjMgZnJvbSAnd2ViMyc7XG5cbi8vIEltcG9ydCBUU1ggRmlsZVxuaW1wb3J0IHsgZ2V0UlBDTm9kZVVybCwgZ2V0Q2hhaW5JRCB9IGZyb20gJy4vZ2V0UlBDJztcblxuLy8gRGVmaW5lIENvbnN0YW50c1xuLy8gY29uc3QgUE9MTElOR19JTlRFUlZBTDogbnVtYmVyID0gMTIwMDA7XG5jb25zdCBSUENfVVJMOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBnZXRSUENOb2RlVXJsKCk7XG5jb25zdCBDSEFJTl9JRDogbnVtYmVyID0gZ2V0Q2hhaW5JRCgpO1xuXG4vLyBUeXBlIENoZWNrOiBSUENfVVJMIHNob3VsZCBiZSB2YWxpZCBzdHJpbmdcbmlmIChSUENfVVJMID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VSTCBUeXBlIEVycm9yOiBzaG91bGQgYmUgc3RyaW5nJyk7XG59XG5cbi8vIFR5cGUgQ2hlY2s6IENIQUlOX0lEIHNob3VsZCBiZSB2YWxpZCBOdW1iZXJcbmlmIChDSEFJTl9JRCA9PT0gTmFOKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIE51bW5lcmljIEVycm9yOiBzaG91bGQgYmUgYSB2YWxpZCBudW1iZXInKTtcbn1cblxuLy8gQ29ubmVjdCB0byBJbmplY3QgQ29ubmVjdG9yXG5leHBvcnQgY29uc3QgaW5qZWN0ZWQgPSBuZXcgSW5qZWN0ZWRDb25uZWN0b3Ioe1xuICAgIHN1cHBvcnRlZENoYWluSWRzOiBbQ0hBSU5fSURdLFxufSk7XG5cbi8vQHRzLWlnbm9yZVxuaW5qZWN0ZWQuaGFuZGxlQ2hhaW5DaGFuZ2VkID0gKG5ld0NoYWluSUQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgIGlmIChuZXdDaGFpbklEICE9IENIQUlOX0lEKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdfaXJpc19maW50ZWNoXycpO1xuXG4gICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICBpbmplY3RlZC5lbWl0RGVhY3RpdmF0ZSgpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvL0B0cy1pZ25vcmVcbiAgICBpbmplY3RlZC5lbWl0VXBkYXRlKHsgY2hhaW5JZDogbmV3Q2hhaW5JRCwgcHJvdmlkZXI6IHdpbmRvdy5CaW5hbmNlQ2hhaW4gfSk7XG5cbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG59O1xuXG4vLyBDb25uZWN0IHRvIFdhbGxldGNvbm5lY3QgQ29ubmVjdG9yXG5jb25zdCBQT0xMSU5HX0lOVEVSVkFMID0gMTIwMDA7XG5cbmV4cG9ydCBjb25zdCB3YWxsZXRjb25uZWN0ID0gbmV3IFdhbGxldENvbm5lY3RDb25uZWN0b3Ioe1xuICAgIHJwYzogeyAxOiBSUENfVVJMIH0sXG4gICAgYnJpZGdlOiAnaHR0cHM6Ly9icmlkZ2Uud2FsbGV0Y29ubmVjdC5vcmcnLFxuICAgIHFyY29kZTogdHJ1ZSxcbiAgICBwb2xsaW5nSW50ZXJ2YWw6IFBPTExJTkdfSU5URVJWQUwsXG59KTtcblxuLy8gZ2V0TGlicmFyeSBmdW5jdGlvbiBmb3IgV2ViM1Byb3ZpZGVyXG5leHBvcnQgY29uc3QgZ2V0TGlicmFyeSA9IChwcm92aWRlcjogYW55KTogV2ViMyA9PiB7XG4gICAgY29uc3QgbGlicmFyeSA9IG5ldyBXZWIzKHByb3ZpZGVyKTtcbiAgICByZXR1cm4gbGlicmFyeTtcbn07XG4iLCJpbXBvcnQgc2FtcGxlIGZyb20gJ2xvZGFzaC9zYW1wbGUnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG4vLyBFcnJvciBjaGVjayBcIi5lbnZcIiBmaWxlIGZvciBCU0NfUlBDX1VSTFxuaWYgKCFjb25maWcucnBjX3VybDEgfHwgIWNvbmZpZy5ycGNfdXJsMikge1xuICAgIHRocm93IEVycm9yKCdFVEhfUlBDX1VSTHMgaXMgdW5kZWZpbmVkJyk7XG59XG5cbi8vIEFycmF5IG9mIGF2YWlsYWJsZSBub2RlcyB0byBjb25uZWN0IHRvIEJpbmFuY2UgU21hcnQgQ2hhaW5cbmV4cG9ydCBjb25zdCBSUENfTk9ERVMgPSBbY29uZmlnLnJwY191cmwxLCBjb25maWcucnBjX3VybDJdO1xuXG5jb25zdCBnZXRSUENOb2RlVXJsID0gKCk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gICAgLy8gZ2V0IFVSTFxuICAgIGNvbnN0IHVybCA9IHNhbXBsZShSUENfTk9ERVMpO1xuXG4gICAgLy8gcmV0dXJuIHVuZGVmaW5lZCBpZiBmYWlsZWQgdG8gZXh0cmFjdCB2YWxpZCBVUkxcbiAgICBpZiAodXJsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyByZXR1cm4gdmFsaWQgc3RyaW5nIFVSTFxuICAgIHJldHVybiB1cmw7XG59O1xuXG4vLyBFcnJvciBjaGVjayBcIi5lbnZcIiBmaWxlIGZvciBCU0NfQ0hBSU5fSURcbmlmIChjb25maWcuY2hhaW5JZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdCU0NfQ0hBSU5fSUQgaXMgdW5kZWZpbmVkJyk7XG59XG5cbmNvbnN0IGNoYWluSUQgPSBjb25maWcuY2hhaW5JZDtcblxuY29uc3QgZ2V0Q2hhaW5JRCA9ICgpID0+IHtcbiAgICByZXR1cm4gcGFyc2VJbnQoY2hhaW5JRCwgMTApO1xufTtcblxuZXhwb3J0IHsgZ2V0UlBDTm9kZVVybCwgZ2V0Q2hhaW5JRCB9O1xuIl0sIm5hbWVzIjpbImFjdGl2YXRlIiwiZGlzcGF0Y2giLCJsb2dpbiIsInVzZUF1dGgiLCJ1c2VFZmZlY3QiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic3VwcHJlc3MiLCJjb25uZWN0b3IiLCJhY3RpdmUiLCJlcnJvciIsImNvbm5lY3RlZFdhbGxldCIsIm9uIiwiaGFuZGxlQ29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJoYW5kbGVDaGFpbkNoYW5nZWQiLCJjaGFpbklkIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJoYW5kbGVBY2NvdW50c0NoYW5nZWQiLCJhY2NvdW50cyIsImxlbmd0aCIsImhhbmRsZU5ldHdvcmtDaGFuZ2VkIiwibmV0d29ya0lkIiwicmVtb3ZlTGlzdGVuZXIiLCJ0cmllZEVhZ2VyIiwic3RhdGUiLCJ0cmllZCIsIk1haW4iLCJsYXp5IiwiV2FsbGV0TW9kYWwiLCJSb3V0ZXMiLCJIZWFkZXIiLCJGb290ZXIiLCJycGNfdXJsMSIsInJwY191cmwyIiwiYmFja2VuZF91cmwiLCJkZWFjdGl2YXRlIiwic2V0SXRlbSIsImxvZ291dCIsInVzZUNhbGxiYWNrIiwicmVtb3ZlSXRlbSIsImNvbm5lY3RvcklkIiwiY3VycmVudENvbm5lY3RvciIsImNvbm5lY3RvclR5cGUiLCJhc3luYyIsImhhc1NldHVwIiwicHJvdmlkZXIiLCJldGhlcmV1bSIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJ0b1N0cmluZyIsInN3aXRjaEVycm9yIiwiY29kZSIsImNoYWluTmFtZSIsIm5hdGl2ZUN1cnJlbmN5IiwibmFtZSIsInN5bWJvbCIsImRlY2ltYWxzIiwicnBjVXJscyIsImdldFJQQyIsImJsb2NrRXhwbG9yZXJVcmxzIiwiYWRkRXJyb3IiLCJzZXR1cE5ldHdvcmsiLCJ1bmRlZmluZWQiLCJjYXRjaCIsImhhbmRsZURpc2Nvbm5lY3QiLCJtZXNzYWdlIiwidXNlQXBwRGlzcGF0Y2giLCJ1c2VBcHBTZWxlY3RvciIsInRyaWVkRWFnZXJTbGljZSIsImluaXRpYWxTdGF0ZSIsInJlZHVjZXJzIiwic2V0U3RhdGUiLCJhY3Rpb24iLCJwYXlsb2FkIiwiYWN0aW9ucyIsIlJQQ19VUkwiLCJDSEFJTl9JRCIsIkVycm9yIiwiTmFOIiwiaW5qZWN0ZWQiLCJzdXBwb3J0ZWRDaGFpbklkcyIsIm5ld0NoYWluSUQiLCJlbWl0RGVhY3RpdmF0ZSIsImVtaXRVcGRhdGUiLCJCaW5hbmNlQ2hhaW4iLCJ3YWxsZXRjb25uZWN0IiwicnBjIiwiYnJpZGdlIiwicXJjb2RlIiwicG9sbGluZ0ludGVydmFsIiwiZ2V0TGlicmFyeSIsIlJQQ19OT0RFUyIsImdldFJQQ05vZGVVcmwiLCJ1cmwiLCJjaGFpbklEIiwiZ2V0Q2hhaW5JRCIsInBhcnNlSW50Il0sInNvdXJjZVJvb3QiOiIifQ==