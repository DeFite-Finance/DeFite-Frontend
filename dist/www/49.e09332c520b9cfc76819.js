(self.webpackChunkhugiris_nft=self.webpackChunkhugiris_nft||[]).push([[49],{42052:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return C}});var r=t(85893),o=t(67294),i=t(77044),c=t(92375),a=t(58511);var s=()=>{const{activate:e}=(0,i.Ge)(),n=(0,c.T)(),{login:t}=(0,a.Z)();(0,o.useEffect)((()=>{localStorage.getItem("_iris_fintech_")&&t("useEagerConnect")}),[e,n,t])},u=t(25108);var l=(e=!1)=>{const{connector:n,active:t,error:r}=(0,i.Ge)(),c=localStorage.getItem("_iris_fintech_")??"",{login:s}=(0,a.Z)();(0,o.useEffect)((()=>{if(n&&n.on&&!t&&!r&&!e){const e=()=>{u.log("Handling 'connect' event"),s("useInactiveListener")},t=e=>{u.log("Handling 'chainChanged' event with payload",e),window.location.reload(),s("useInactiveListener")},r=e=>{u.log("Handling 'accountsChanged' event with payload",e),e.length>0&&s("useInactiveListener")},o=e=>{u.log("Handling 'networkChanged' event with payload",e),s("useInactiveListener")};return n.on("connect",e),n.on("chainChanged",t),n.on("accountsChanged",r),n.on("networkChanged",o),()=>{n.removeListener&&(n.removeListener("connect",e),n.removeListener("chainChanged",t),n.removeListener("accountsChanged",r),n.removeListener("networkChanged",o))}}}),[t,r,e,n,s,c])};var d=()=>{const e=(0,c.C)((e=>e.triedEager.tried));s(),l(!e)};const h=(0,o.lazy)((()=>Promise.all([t.e(216),t.e(827)]).then(t.bind(t,93827)))),f=(0,o.lazy)((()=>Promise.all([t.e(216),t.e(428)]).then(t.bind(t,29428)))),_=(0,o.lazy)((()=>t.e(285).then(t.bind(t,1285)))),v=(0,o.lazy)((()=>Promise.all([t.e(216),t.e(823)]).then(t.bind(t,5823)))),g=(0,o.lazy)((()=>t.e(418).then(t.bind(t,66418))));var C=()=>(d(),(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{},void 0),(0,r.jsx)(_,{},void 0),(0,r.jsx)(h,{},void 0),(0,r.jsx)(f,{},void 0),(0,r.jsx)(g,{},void 0)]},void 0))},88476:function(e,n,t){"use strict";var r=t(34155),o=t(25108);t(59738).config(),r.env.REACT_APP_ETH_MAINNET_RPC_URL_1&&r.env.REACT_APP_ETH_MAINNET_RPC_URL_2||(o.error("Missing RPC url!!"),r.exit(1)),r.env.REACT_APP_BACKEND_URL||(o.error("Missing backend url!!"),r.exit(1));const i={chainId:r.env.REACT_APP_ETH_MAINNET_CHAIN_ID||"1",rpc_url1:r.env.REACT_APP_ETH_MAINNET_RPC_URL_1||"",rpc_url2:r.env.REACT_APP_ETH_MAINNET_RPC_URL_2||"",backend_url:r.env.REACT_APP_BACKEND_URL||""};n.Z=i},58511:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(67294),o=t(77044),i=t(30950),c=t(83929),a=t(40782),s=t(92375),u=t(38658),l=t(42256),d=t(25108);var h=t(25108);var f=()=>{const e=(0,s.T)(),{active:n,connector:t,activate:f,deactivate:_}=(0,o.Ge)();n&&(t==a.Lj?localStorage.setItem("_iris_fintech_","Injected"):t==a.Lw&&localStorage.setItem("_iris_fintech_","WalletConnect"));const v=(0,r.useCallback)((()=>{e((0,u.IW)(!1)),_(),"WalletConnect"==localStorage.getItem("_iris_fintech_")&&a.Lw.handleDisconnect(),localStorage.removeItem("_iris_fintech_"),localStorage.removeItem("walletconnect")}),[_,e]);return{login:(0,r.useCallback)((n=>{var t;if("Injected"==n)t=a.Lj;else if("WalletConnect"==n)t=a.Lw;else{const e=localStorage.getItem("_iris_fintech_");"Injected"==e?t=a.Lj:"WalletConnect"==e&&(t=a.Lw)}t?f(t,(async n=>{if(n instanceof o.Uu)if(t==a.Lj){const n=await(async()=>{const e=window.ethereum;if(!e)return d.error("Can't setup the BSC network on metamask because window.ethereum is undefined"),!1;{const n=(0,l.nU)();try{try{return await e.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${n.toString(16)}`}]}),!0}catch(t){if(4902!==t.code)return!1;try{return await e.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${n.toString(16)}`,chainName:"Ethereum Mainnet",nativeCurrency:{name:"ETH",symbol:"eth",decimals:18},rpcUrls:[(0,l.p1)()],blockExplorerUrls:["https://etherscan.io"]}]}),!0}catch(e){return d.error("add",e),!1}}}catch(e){return d.error("setup",e),!1}}})();n?f(t,void 0,!0).catch((()=>{e((0,u.IW)(!0))})):v()}else t==a.Lw&&(t.handleDisconnect(),v());else n instanceof i.A5?h.log("Provider Error","No provider was found"):n instanceof i.ab?h.log("Authorization Error","Please authorize to access your account"):n instanceof c.ab?(t.handleDisconnect(),h.log("Authorization Error","Please authorize to access your account")):h.log(n.name,n.message),v()})).catch((()=>{e((0,u.IW)(!0)),v()})):(h.log("Can't find connector","The connector config is wrong"),v())}),[f,e,v]),logout:v}}},92375:function(e,n,t){"use strict";t.d(n,{T:function(){return o},C:function(){return i}});var r=t(23594);const o=()=>(0,r.I0)(),i=r.v9},38658:function(e,n,t){"use strict";t.d(n,{IW:function(){return o}});const r=(0,t(64399).oM)({name:"triedEager",initialState:{tried:!1},reducers:{setState:(e,n)=>{e.tried=n.payload}}}),{setState:o}=r.actions;n.ZP=r.reducer},40782:function(e,n,t){"use strict";t.d(n,{Lj:function(){return l},Lw:function(){return d},av:function(){return h}});var r=t(30950),o=t(83929),i=t(3283),c=t.n(i),a=t(42256);const s=(0,a.p1)(),u=(0,a.nU)();if(void 0===s)throw new Error("URL Type Error: should be string");if(NaN===u)throw new Error("Invalid Numneric Error: should be a valid number");const l=new r._k({supportedChainIds:[u]});l.handleChainChanged=e=>{if(e!=u)return localStorage.removeItem("_iris_fintech_"),void l.emitDeactivate();l.emitUpdate({chainId:e,provider:window.BinanceChain}),window.location.reload()};const d=new o.zw({rpc:{1:s},bridge:"https://bridge.walletconnect.org",qrcode:!0,pollingInterval:12e3}),h=e=>new(c())(e)},42256:function(e,n,t){"use strict";t.d(n,{p1:function(){return a},nU:function(){return u}});var r=t(95534),o=t.n(r),i=t(88476);if(!i.Z.rpc_url1||!i.Z.rpc_url2)throw Error("ETH_RPC_URLs is undefined");const c=[i.Z.rpc_url1,i.Z.rpc_url2],a=()=>{const e=o()(c);if(void 0!==e)return e};if(void 0===i.Z.chainId)throw new Error("BSC_CHAIN_ID is undefined");const s=i.Z.chainId,u=()=>parseInt(s,10)},62859:function(){},75304:function(){},46601:function(){},89214:function(){},71922:function(){},2363:function(){},96419:function(){},56353:function(){},76647:function(){},69386:function(){},31616:function(){},29120:function(){},46586:function(){},6567:function(){},71408:function(){},23646:function(){},43503:function(){},33557:function(){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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NUQvRSxPQUFPQyxTQUFTQyxVQUlwQixNQUVhOEUsRUFBZ0IsSUFBSSxLQUF1QixDQUNwREMsSUFBSyxDQUFFLEVBQUdYLEdBQ1ZZLE9BQVEsbUNBQ1JDLFFBQVEsRUFDUkMsZ0JBTnFCLE9BVVpDLEVBQWM5QyxHQUNQLElBQUksSUFBSixDQUFTQSxJLCtIQ3JEN0IsSUFBSyxlQUFvQixhQUNyQixNQUFNaUMsTUFBTSw2QkFJVCxNQUFNYyxFQUFZLENBQUMsYUFBaUIsY0FFckNDLEVBQWdCLEtBRWxCLE1BQU1DLEVBQU0sSUFBT0YsR0FHbkIsUUFBWTdCLElBQVIrQixFQUtKLE9BQU9BLEdBSVgsUUFBdUIvQixJQUFuQixZQUNBLE1BQU0sSUFBSWUsTUFBTSw2QkFHcEIsTUFBTWlCLEVBQVUsWUFFVkMsRUFBYSxJQUNSQyxTQUFTRixFQUFTLEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9ob29rcy91c2VFYWdlckNvbm5lY3QudHN4Iiwid2VicGFjazovL2h1Z2lyaXMtbmZ0Ly4vc3JjL2hvb2tzL3VzZUluYWN0aXZlTGlzdGVuZXIudHN4Iiwid2VicGFjazovL2h1Z2lyaXMtbmZ0Ly4vc3JjL3V0aWxzL2Jhc2VDb25uZWN0aW9uLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9BcHAudHN4Iiwid2VicGFjazovL2h1Z2lyaXMtbmZ0Ly4vc3JjL2NvbmZpZy50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvaG9va3MvdXNlQXV0aC50c3giLCJ3ZWJwYWNrOi8vaHVnaXJpcy1uZnQvLi9zcmMvaG9va3Mvd2FsbGV0VG9rZW5OZXR3b3JrLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9yZWR1eC9ob29rLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy9yZWR1eC90cmllZEVhZ2VyLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy91dGlscy9jb25uZWN0b3JzLnRzeCIsIndlYnBhY2s6Ly9odWdpcmlzLW5mdC8uL3NyYy91dGlscy9nZXRSUEMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVdlYjNSZWFjdCB9IGZyb20gJ0B3ZWIzLXJlYWN0L2NvcmUnO1xuaW1wb3J0IHsgdXNlQXBwRGlzcGF0Y2ggfSBmcm9tICcuLi9yZWR1eC9ob29rJztcbmltcG9ydCB1c2VBdXRoIGZyb20gJy4vdXNlQXV0aCc7XG5cbmNvbnN0IHVzZUVhZ2VyQ29ubmVjdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGFjdGl2YXRlIH0gPSB1c2VXZWIzUmVhY3QoKTtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XG4gICAgY29uc3QgeyBsb2dpbiB9ID0gdXNlQXV0aCgpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgY29ubmVjZXRlZFdhbGxldCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfaXJpc19maW50ZWNoXycpO1xuXG4gICAgICAgIGlmIChjb25uZWNldGVkV2FsbGV0KSB7XG4gICAgICAgICAgICBsb2dpbigndXNlRWFnZXJDb25uZWN0Jyk7XG4gICAgICAgIH1cbiAgICB9LCBbYWN0aXZhdGUsIGRpc3BhdGNoLCBsb2dpbl0pOyAvLyBpbnRlbnRpb25hbGx5IG9ubHkgcnVubmluZyBvbiBtb3VudCAobWFrZSBzdXJlIGl0J3Mgb25seSBtb3VudGVkIG9uY2UgOikpXG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VFYWdlckNvbm5lY3Q7XG4iLCJpbXBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VXZWIzUmVhY3QgfSBmcm9tICdAd2ViMy1yZWFjdC9jb3JlJztcbmltcG9ydCB1c2VBdXRoIGZyb20gJy4vdXNlQXV0aCc7XG5cbmNvbnN0IHVzZUluYWN0aXZlTGlzdGVuZXIgPSAoc3VwcHJlc3M6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHsgY29ubmVjdG9yLCBhY3RpdmUsIGVycm9yIH0gPSB1c2VXZWIzUmVhY3QoKTtcbiAgICBjb25zdCBjb25uZWN0ZWRXYWxsZXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnX2lyaXNfZmludGVjaF8nKSA/PyAnJztcbiAgICBjb25zdCB7IGxvZ2luIH0gPSB1c2VBdXRoKCk7XG5cbiAgICB1c2VFZmZlY3QoKCk6IGFueSA9PiB7XG4gICAgICAgIGlmIChjb25uZWN0b3IgJiYgY29ubmVjdG9yLm9uICYmICFhY3RpdmUgJiYgIWVycm9yICYmICFzdXBwcmVzcykge1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlQ29ubmVjdCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nICdjb25uZWN0JyBldmVudFwiKTtcbiAgICAgICAgICAgICAgICBsb2dpbigndXNlSW5hY3RpdmVMaXN0ZW5lcicpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUNoYWluQ2hhbmdlZCA9IChjaGFpbklkOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nICdjaGFpbkNoYW5nZWQnIGV2ZW50IHdpdGggcGF5bG9hZFwiLCBjaGFpbklkKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgbG9naW4oJ3VzZUluYWN0aXZlTGlzdGVuZXInKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBY2NvdW50c0NoYW5nZWQgPSAoYWNjb3VudHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyAnYWNjb3VudHNDaGFuZ2VkJyBldmVudCB3aXRoIHBheWxvYWRcIiwgYWNjb3VudHMpO1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2luKCd1c2VJbmFjdGl2ZUxpc3RlbmVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZU5ldHdvcmtDaGFuZ2VkID0gKG5ldHdvcmtJZDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyAnbmV0d29ya0NoYW5nZWQnIGV2ZW50IHdpdGggcGF5bG9hZFwiLCBuZXR3b3JrSWQpO1xuICAgICAgICAgICAgICAgIGxvZ2luKCd1c2VJbmFjdGl2ZUxpc3RlbmVyJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25uZWN0b3Iub24oJ2Nvbm5lY3QnLCBoYW5kbGVDb25uZWN0KTtcbiAgICAgICAgICAgIGNvbm5lY3Rvci5vbignY2hhaW5DaGFuZ2VkJywgaGFuZGxlQ2hhaW5DaGFuZ2VkKTtcbiAgICAgICAgICAgIGNvbm5lY3Rvci5vbignYWNjb3VudHNDaGFuZ2VkJywgaGFuZGxlQWNjb3VudHNDaGFuZ2VkKTtcbiAgICAgICAgICAgIGNvbm5lY3Rvci5vbignbmV0d29ya0NoYW5nZWQnLCBoYW5kbGVOZXR3b3JrQ2hhbmdlZCk7XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbm5lY3Rvci5yZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3IucmVtb3ZlTGlzdGVuZXIoJ2Nvbm5lY3QnLCBoYW5kbGVDb25uZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdG9yLnJlbW92ZUxpc3RlbmVyKCdjaGFpbkNoYW5nZWQnLCBoYW5kbGVDaGFpbkNoYW5nZWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0b3IucmVtb3ZlTGlzdGVuZXIoJ2FjY291bnRzQ2hhbmdlZCcsIGhhbmRsZUFjY291bnRzQ2hhbmdlZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rvci5yZW1vdmVMaXN0ZW5lcignbmV0d29ya0NoYW5nZWQnLCBoYW5kbGVOZXR3b3JrQ2hhbmdlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sIFthY3RpdmUsIGVycm9yLCBzdXBwcmVzcywgY29ubmVjdG9yLCBsb2dpbiwgY29ubmVjdGVkV2FsbGV0XSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VJbmFjdGl2ZUxpc3RlbmVyO1xuIiwiaW1wb3J0IHVzZUVhZ2VyQ29ubmVjdCBmcm9tICcuLi9ob29rcy91c2VFYWdlckNvbm5lY3QnO1xuaW1wb3J0IHVzZUluYWN0aXZlTGlzdGVuZXIgZnJvbSAnLi4vaG9va3MvdXNlSW5hY3RpdmVMaXN0ZW5lcic7XG5pbXBvcnQgeyB1c2VBcHBTZWxlY3RvciB9IGZyb20gJy4uL3JlZHV4L2hvb2snO1xuXG5jb25zdCBCYXNlQ29ubmVjdG9yID0gKCkgPT4ge1xuICAgIGNvbnN0IHRyaWVkRWFnZXIgPSB1c2VBcHBTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLnRyaWVkRWFnZXIudHJpZWQpO1xuXG4gICAgLy8gaGFuZGxlIGxvZ2ljIHRvIGVhZ2VybHkgY29ubmVjdCB0byB0aGUgaW5qZWN0ZWQgZXRoZXJldW0gcHJvdmlkZXIsIGlmIGl0IGV4aXN0cyBhbmQgaGFzIGdyYW50ZWQgYWNjZXNzIGFscmVhZHlcbiAgICB1c2VFYWdlckNvbm5lY3QoKTtcblxuICAgIC8vIGhhbmRsZSBsb2dpYyB0byBjb25uZWN0IGluIHJlYWN0aW9uIHRvIGNlcnRhaW4gZXZlbnRzIG9uIHRoZSBpbmplY3RlZCBldGhlcmV1bSBwcm92aWRlciwgaWYgaXQgZXhpc3RzXG4gICAgdXNlSW5hY3RpdmVMaXN0ZW5lcighdHJpZWRFYWdlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBCYXNlQ29ubmVjdG9yO1xuIiwiaW1wb3J0IFJlYWN0LCB7IGxhenkgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IE1haW4gPSBsYXp5KCgpID0+IGltcG9ydCgnLi9jb21wb25lbnRzL01haW4nKSk7XG5jb25zdCBXYWxsZXRNb2RhbCA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvV2FsbGV0TW9kYWwnKSk7XG5jb25zdCBSb3V0ZXMgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9yb3V0ZScpKTtcbmNvbnN0IEhlYWRlciA9IGxhenkoKCkgPT4gaW1wb3J0KCcuL2NvbXBvbmVudHMvSGVhZGVyJykpO1xuY29uc3QgRm9vdGVyID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vY29tcG9uZW50cy9Gb290ZXIvRm9vdGVyJykpO1xuXG4vLyBjb25zdCBBY2NvdW50ID0gbGF6eSgoKSA9PiBpbXBvcnQoJy4vY29tcG9uZW50cy9BY2NvdW50JykpO1xuXG5pbXBvcnQgQmFzZUNvbm5lY3RvciBmcm9tICcuL3V0aWxzL2Jhc2VDb25uZWN0aW9uJztcblxuY29uc3QgQXBwID0gKCkgPT4ge1xuICAgIEJhc2VDb25uZWN0b3IoKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8SGVhZGVyIC8+XG4gICAgICAgICAgICA8Um91dGVzIC8+XG4gICAgICAgICAgICA8TWFpbiAvPlxuICAgICAgICAgICAgPFdhbGxldE1vZGFsIC8+XG4gICAgICAgICAgICB7LyogPEFjY291bnQgLz4gKi99XG4gICAgICAgICAgICA8Rm9vdGVyIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBcHA7XG4iLCJyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoIXByb2Nlc3MuZW52LlJFQUNUX0FQUF9FVEhfTUFJTk5FVF9SUENfVVJMXzEgfHwgIXByb2Nlc3MuZW52LlJFQUNUX0FQUF9FVEhfTUFJTk5FVF9SUENfVVJMXzIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBSUEMgdXJsISEnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgICBpZiAoIXByb2Nlc3MuZW52LlJFQUNUX0FQUF9CQUNLRU5EX1VSTCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNaXNzaW5nIGJhY2tlbmQgdXJsISEnKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbn1cblxuY29uc3QgY29uZmlnID0ge1xuICAgIGNoYWluSWQ6IHByb2Nlc3MuZW52LlJFQUNUX0FQUF9FVEhfTUFJTk5FVF9DSEFJTl9JRCB8fCAnMScsXG4gICAgcnBjX3VybDE6IHByb2Nlc3MuZW52LlJFQUNUX0FQUF9FVEhfTUFJTk5FVF9SUENfVVJMXzEgfHwgJycsXG4gICAgcnBjX3VybDI6IHByb2Nlc3MuZW52LlJFQUNUX0FQUF9FVEhfTUFJTk5FVF9SUENfVVJMXzIgfHwgJycsXG5cbiAgICBiYWNrZW5kX3VybDogcHJvY2Vzcy5lbnYuUkVBQ1RfQVBQX0JBQ0tFTkRfVVJMIHx8ICcnLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnO1xuIiwiLy8gaW1wb3J0IG5lY2Vzc2FyeSBsaWJyYXJ5XG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVdlYjNSZWFjdCwgVW5zdXBwb3J0ZWRDaGFpbklkRXJyb3IgfSBmcm9tICdAd2ViMy1yZWFjdC9jb3JlJztcbmltcG9ydCB7XG4gICAgTm9FdGhlcmV1bVByb3ZpZGVyRXJyb3IsXG4gICAgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yIGFzIFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvckluamVjdGVkLFxufSBmcm9tICdAd2ViMy1yZWFjdC9pbmplY3RlZC1jb25uZWN0b3InO1xuXG5pbXBvcnQgeyBVc2VyUmVqZWN0ZWRSZXF1ZXN0RXJyb3IgYXMgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yV2FsbGV0Q29ubmVjdCB9IGZyb20gJ0B3ZWIzLXJlYWN0L3dhbGxldGNvbm5lY3QtY29ubmVjdG9yJztcblxuLy8gaW1wb3J0IGxvY2FsIGNvbXBvbmVudHNcbmltcG9ydCB7IGluamVjdGVkLCB3YWxsZXRjb25uZWN0IH0gZnJvbSAnLi4vdXRpbHMvY29ubmVjdG9ycyc7XG5pbXBvcnQgeyB1c2VBcHBEaXNwYXRjaCB9IGZyb20gJy4uL3JlZHV4L2hvb2snO1xuaW1wb3J0IHsgc2V0U3RhdGUgfSBmcm9tICcuLi9yZWR1eC90cmllZEVhZ2VyJztcbmltcG9ydCB7IHNldHVwTmV0d29yayB9IGZyb20gJy4vd2FsbGV0VG9rZW5OZXR3b3JrJztcblxuY29uc3QgdXNlQXV0aCA9ICgpID0+IHtcbiAgICBjb25zdCBkaXNwYXRjaCA9IHVzZUFwcERpc3BhdGNoKCk7XG4gICAgY29uc3QgeyBhY3RpdmUsIGNvbm5lY3RvciwgYWN0aXZhdGUsIGRlYWN0aXZhdGUgfSA9IHVzZVdlYjNSZWFjdCgpO1xuXG4gICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICBpZiAoY29ubmVjdG9yID09IGluamVjdGVkKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnX2lyaXNfZmludGVjaF8nLCAnSW5qZWN0ZWQnKTtcbiAgICAgICAgfSBlbHNlIGlmIChjb25uZWN0b3IgPT0gd2FsbGV0Y29ubmVjdCkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19pcmlzX2ZpbnRlY2hfJywgJ1dhbGxldENvbm5lY3QnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGxvZ291dCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgZGlzcGF0Y2goc2V0U3RhdGUoZmFsc2UpKTtcbiAgICAgICAgZGVhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnX2lyaXNfZmludGVjaF8nKSA9PSAnV2FsbGV0Q29ubmVjdCcpIHtcbiAgICAgICAgICAgICh3YWxsZXRjb25uZWN0IGFzIGFueSkuaGFuZGxlRGlzY29ubmVjdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ19pcmlzX2ZpbnRlY2hfJyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd3YWxsZXRjb25uZWN0Jyk7XG4gICAgfSwgW2RlYWN0aXZhdGUsIGRpc3BhdGNoXSk7XG5cbiAgICBjb25zdCBsb2dpbiA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAoY29ubmVjdG9ySWQpID0+IHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50Q29ubmVjdG9yOiBhbnk7XG4gICAgICAgICAgICBpZiAoY29ubmVjdG9ySWQgPT0gJ0luamVjdGVkJykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IgPSBpbmplY3RlZDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29ubmVjdG9ySWQgPT0gJ1dhbGxldENvbm5lY3QnKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudENvbm5lY3RvciA9IHdhbGxldGNvbm5lY3Q7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RvclR5cGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnX2lyaXNfZmludGVjaF8nKTtcbiAgICAgICAgICAgICAgICBpZiAoY29ubmVjdG9yVHlwZSA9PSAnSW5qZWN0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IgPSBpbmplY3RlZDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbm5lY3RvclR5cGUgPT0gJ1dhbGxldENvbm5lY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IgPSB3YWxsZXRjb25uZWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZShjdXJyZW50Q29ubmVjdG9yLCBhc3luYyAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVuc3VwcG9ydGVkQ2hhaW5JZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENvbm5lY3RvciA9PSBpbmplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1NldHVwID0gYXdhaXQgc2V0dXBOZXR3b3JrKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzU2V0dXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGUoY3VycmVudENvbm5lY3RvciwgdW5kZWZpbmVkLCB0cnVlKS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRTdGF0ZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvZ291dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudENvbm5lY3RvciA9PSB3YWxsZXRjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbm5lY3Rvci5oYW5kbGVEaXNjb25uZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIE5vRXRoZXJldW1Qcm92aWRlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb3ZpZGVyIEVycm9yJywgJ05vIHByb3ZpZGVyIHdhcyBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIFVzZXJSZWplY3RlZFJlcXVlc3RFcnJvckluamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0F1dGhvcml6YXRpb24gRXJyb3InLCAnUGxlYXNlIGF1dGhvcml6ZSB0byBhY2Nlc3MgeW91ciBhY2NvdW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgVXNlclJlamVjdGVkUmVxdWVzdEVycm9yV2FsbGV0Q29ubmVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb25uZWN0b3IuaGFuZGxlRGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBdXRob3JpemF0aW9uIEVycm9yJywgJ1BsZWFzZSBhdXRob3JpemUgdG8gYWNjZXNzIHlvdXIgYWNjb3VudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5uYW1lLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ291dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRTdGF0ZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ291dCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbid0IGZpbmQgY29ubmVjdG9yXCIsICdUaGUgY29ubmVjdG9yIGNvbmZpZyBpcyB3cm9uZycpO1xuICAgICAgICAgICAgICAgIGxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbYWN0aXZhdGUsIGRpc3BhdGNoLCBsb2dvdXRdLFxuICAgICk7XG5cbiAgICByZXR1cm4geyBsb2dpbiwgbG9nb3V0IH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1c2VBdXRoO1xuIiwiaW1wb3J0IHsgZ2V0Q2hhaW5JRCwgZ2V0UlBDTm9kZVVybCB9IGZyb20gJy4uL3V0aWxzL2dldFJQQyc7XG5cbmV4cG9ydCBjb25zdCBzZXR1cE5ldHdvcmsgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgcHJvdmlkZXIgPSB3aW5kb3cuZXRoZXJldW07XG5cbiAgICBpZiAocHJvdmlkZXIpIHtcbiAgICAgICAgY29uc3QgY2hhaW5JZCA9IGdldENoYWluSUQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIucmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3dhbGxldF9zd2l0Y2hFdGhlcmV1bUNoYWluJyxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbeyBjaGFpbklkOiBgMHgke2NoYWluSWQudG9TdHJpbmcoMTYpfWAgfV0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGNhdGNoIChzd2l0Y2hFcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgZXJyb3IgY29kZSBpbmRpY2F0ZXMgdGhhdCB0aGUgY2hhaW4gaGFzIG5vdCBiZWVuIGFkZGVkIHRvIE1ldGFNYXNrLlxuICAgICAgICAgICAgICAgIGlmICgoc3dpdGNoRXJyb3IgYXMgYW55KS5jb2RlID09PSA0OTAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfYWRkRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGAweCR7Y2hhaW5JZC50b1N0cmluZygxNil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluTmFtZTogJ0V0aGVyZXVtIE1haW5uZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aXZlQ3VycmVuY3k6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRVRIJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICdldGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiAxOCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBycGNVcmxzOiBbZ2V0UlBDTm9kZVVybCgpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrRXhwbG9yZXJVcmxzOiBbJ2h0dHBzOi8vZXRoZXJzY2FuLmlvJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGFkZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgXCJhZGRcIiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignYWRkJywgYWRkRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NldHVwJywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbid0IHNldHVwIHRoZSBCU0MgbmV0d29yayBvbiBtZXRhbWFzayBiZWNhdXNlIHdpbmRvdy5ldGhlcmV1bSBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJUb2tlbiA9IGFzeW5jIChcbiAgICB0b2tlbkFkZHJlc3M6IHN0cmluZyxcbiAgICB0b2tlblN5bWJvbDogc3RyaW5nLFxuICAgIHRva2VuRGVjaW1hbHM6IG51bWJlcixcbiAgICB0b2tlbkltYWdlOiBzdHJpbmcsXG4pID0+IHtcbiAgICBjb25zdCBwcm92aWRlciA9IHdpbmRvdy5ldGhlcmV1bTtcblxuICAgIGNvbnN0IHRva2VuQWRkZWQgPSBhd2FpdCAocHJvdmlkZXIgYXMgYW55KS5yZXF1ZXN0KHtcbiAgICAgICAgbWV0aG9kOiAnd2FsbGV0X3dhdGNoQXNzZXQnLFxuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdFUkMyMCcsXG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgYWRkcmVzczogdG9rZW5BZGRyZXNzLFxuICAgICAgICAgICAgICAgIHN5bWJvbDogdG9rZW5TeW1ib2wsXG4gICAgICAgICAgICAgICAgZGVjaW1hbHM6IHRva2VuRGVjaW1hbHMsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHRva2VuSW1hZ2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRva2VuQWRkZWQ7XG59O1xuIiwiaW1wb3J0IHsgVHlwZWRVc2VTZWxlY3Rvckhvb2ssIHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB0eXBlIHsgUm9vdFN0YXRlLCBBcHBEaXNwYXRjaCB9IGZyb20gJy4vc3RvcmUnO1xuXG4vLyBVc2UgdGhyb3VnaG91dCB5b3VyIGFwcCBpbnN0ZWFkIG9mIHBsYWluIGB1c2VEaXNwYXRjaGAgYW5kIGB1c2VTZWxlY3RvcmBcbmV4cG9ydCBjb25zdCB1c2VBcHBEaXNwYXRjaCA9ICgpID0+IHVzZURpc3BhdGNoPEFwcERpc3BhdGNoPigpO1xuZXhwb3J0IGNvbnN0IHVzZUFwcFNlbGVjdG9yOiBUeXBlZFVzZVNlbGVjdG9ySG9vazxSb290U3RhdGU+ID0gdXNlU2VsZWN0b3I7XG4iLCJpbXBvcnQgeyBjcmVhdGVTbGljZSwgUGF5bG9hZEFjdGlvbiB9IGZyb20gJ0ByZWR1eGpzL3Rvb2xraXQnO1xuXG5leHBvcnQgY29uc3QgdHJpZWRFYWdlclNsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICAgIG5hbWU6ICd0cmllZEVhZ2VyJyxcbiAgICBpbml0aWFsU3RhdGU6IHtcbiAgICAgICAgdHJpZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgcmVkdWNlcnM6IHtcbiAgICAgICAgc2V0U3RhdGU6IChzdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPGJvb2xlYW4+KSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS50cmllZCA9IGFjdGlvbi5wYXlsb2FkO1xuICAgICAgICB9LFxuICAgIH0sXG59KTtcblxuLy8gQWN0aW9uIGNyZWF0b3JzIGFyZSBnZW5lcmF0ZWQgZm9yIGVhY2ggY2FzZSByZWR1Y2VyIGZ1bmN0aW9uXG5leHBvcnQgY29uc3QgeyBzZXRTdGF0ZSB9ID0gdHJpZWRFYWdlclNsaWNlLmFjdGlvbnM7XG5cbmV4cG9ydCBkZWZhdWx0IHRyaWVkRWFnZXJTbGljZS5yZWR1Y2VyO1xuIiwiLy8gTGlicmFyeSBJbXBvcnRcbmltcG9ydCB7IEluamVjdGVkQ29ubmVjdG9yIH0gZnJvbSAnQHdlYjMtcmVhY3QvaW5qZWN0ZWQtY29ubmVjdG9yJztcbmltcG9ydCB7IFdhbGxldENvbm5lY3RDb25uZWN0b3IgfSBmcm9tICdAd2ViMy1yZWFjdC93YWxsZXRjb25uZWN0LWNvbm5lY3Rvcic7XG5pbXBvcnQgV2ViMyBmcm9tICd3ZWIzJztcblxuLy8gSW1wb3J0IFRTWCBGaWxlXG5pbXBvcnQgeyBnZXRSUENOb2RlVXJsLCBnZXRDaGFpbklEIH0gZnJvbSAnLi9nZXRSUEMnO1xuXG4vLyBEZWZpbmUgQ29uc3RhbnRzXG4vLyBjb25zdCBQT0xMSU5HX0lOVEVSVkFMOiBudW1iZXIgPSAxMjAwMDtcbmNvbnN0IFJQQ19VUkw6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGdldFJQQ05vZGVVcmwoKTtcbmNvbnN0IENIQUlOX0lEOiBudW1iZXIgPSBnZXRDaGFpbklEKCk7XG5cbi8vIFR5cGUgQ2hlY2s6IFJQQ19VUkwgc2hvdWxkIGJlIHZhbGlkIHN0cmluZ1xuaWYgKFJQQ19VUkwgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignVVJMIFR5cGUgRXJyb3I6IHNob3VsZCBiZSBzdHJpbmcnKTtcbn1cblxuLy8gVHlwZSBDaGVjazogQ0hBSU5fSUQgc2hvdWxkIGJlIHZhbGlkIE51bWJlclxuaWYgKENIQUlOX0lEID09PSBOYU4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTnVtbmVyaWMgRXJyb3I6IHNob3VsZCBiZSBhIHZhbGlkIG51bWJlcicpO1xufVxuXG4vLyBDb25uZWN0IHRvIEluamVjdCBDb25uZWN0b3JcbmV4cG9ydCBjb25zdCBpbmplY3RlZCA9IG5ldyBJbmplY3RlZENvbm5lY3Rvcih7XG4gICAgc3VwcG9ydGVkQ2hhaW5JZHM6IFtDSEFJTl9JRF0sXG59KTtcblxuLy9AdHMtaWdub3JlXG5pbmplY3RlZC5oYW5kbGVDaGFpbkNoYW5nZWQgPSAobmV3Q2hhaW5JRDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgaWYgKG5ld0NoYWluSUQgIT0gQ0hBSU5fSUQpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ19pcmlzX2ZpbnRlY2hfJyk7XG5cbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGluamVjdGVkLmVtaXREZWFjdGl2YXRlKCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vQHRzLWlnbm9yZVxuICAgIGluamVjdGVkLmVtaXRVcGRhdGUoeyBjaGFpbklkOiBuZXdDaGFpbklELCBwcm92aWRlcjogd2luZG93LkJpbmFuY2VDaGFpbiB9KTtcblxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbn07XG5cbi8vIENvbm5lY3QgdG8gV2FsbGV0Y29ubmVjdCBDb25uZWN0b3JcbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAxMjAwMDtcblxuZXhwb3J0IGNvbnN0IHdhbGxldGNvbm5lY3QgPSBuZXcgV2FsbGV0Q29ubmVjdENvbm5lY3Rvcih7XG4gICAgcnBjOiB7IDE6IFJQQ19VUkwgfSxcbiAgICBicmlkZ2U6ICdodHRwczovL2JyaWRnZS53YWxsZXRjb25uZWN0Lm9yZycsXG4gICAgcXJjb2RlOiB0cnVlLFxuICAgIHBvbGxpbmdJbnRlcnZhbDogUE9MTElOR19JTlRFUlZBTCxcbn0pO1xuXG4vLyBnZXRMaWJyYXJ5IGZ1bmN0aW9uIGZvciBXZWIzUHJvdmlkZXJcbmV4cG9ydCBjb25zdCBnZXRMaWJyYXJ5ID0gKHByb3ZpZGVyOiBhbnkpOiBXZWIzID0+IHtcbiAgICBjb25zdCBsaWJyYXJ5ID0gbmV3IFdlYjMocHJvdmlkZXIpO1xuICAgIHJldHVybiBsaWJyYXJ5O1xufTtcbiIsImltcG9ydCBzYW1wbGUgZnJvbSAnbG9kYXNoL3NhbXBsZSc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5cbi8vIEVycm9yIGNoZWNrIFwiLmVudlwiIGZpbGUgZm9yIEJTQ19SUENfVVJMXG5pZiAoIWNvbmZpZy5ycGNfdXJsMSB8fCAhY29uZmlnLnJwY191cmwyKSB7XG4gICAgdGhyb3cgRXJyb3IoJ0VUSF9SUENfVVJMcyBpcyB1bmRlZmluZWQnKTtcbn1cblxuLy8gQXJyYXkgb2YgYXZhaWxhYmxlIG5vZGVzIHRvIGNvbm5lY3QgdG8gQmluYW5jZSBTbWFydCBDaGFpblxuZXhwb3J0IGNvbnN0IFJQQ19OT0RFUyA9IFtjb25maWcucnBjX3VybDEsIGNvbmZpZy5ycGNfdXJsMl07XG5cbmNvbnN0IGdldFJQQ05vZGVVcmwgPSAoKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAvLyBnZXQgVVJMXG4gICAgY29uc3QgdXJsID0gc2FtcGxlKFJQQ19OT0RFUyk7XG5cbiAgICAvLyByZXR1cm4gdW5kZWZpbmVkIGlmIGZhaWxlZCB0byBleHRyYWN0IHZhbGlkIFVSTFxuICAgIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIHJldHVybiB2YWxpZCBzdHJpbmcgVVJMXG4gICAgcmV0dXJuIHVybDtcbn07XG5cbi8vIEVycm9yIGNoZWNrIFwiLmVudlwiIGZpbGUgZm9yIEJTQ19DSEFJTl9JRFxuaWYgKGNvbmZpZy5jaGFpbklkID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JTQ19DSEFJTl9JRCBpcyB1bmRlZmluZWQnKTtcbn1cblxuY29uc3QgY2hhaW5JRCA9IGNvbmZpZy5jaGFpbklkO1xuXG5jb25zdCBnZXRDaGFpbklEID0gKCkgPT4ge1xuICAgIHJldHVybiBwYXJzZUludChjaGFpbklELCAxMCk7XG59O1xuXG5leHBvcnQgeyBnZXRSUENOb2RlVXJsLCBnZXRDaGFpbklEIH07XG4iXSwibmFtZXMiOlsiYWN0aXZhdGUiLCJkaXNwYXRjaCIsImxvZ2luIiwidXNlQXV0aCIsInVzZUVmZmVjdCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdXBwcmVzcyIsImNvbm5lY3RvciIsImFjdGl2ZSIsImVycm9yIiwiY29ubmVjdGVkV2FsbGV0Iiwib24iLCJoYW5kbGVDb25uZWN0IiwiY29uc29sZSIsImxvZyIsImhhbmRsZUNoYWluQ2hhbmdlZCIsImNoYWluSWQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImhhbmRsZUFjY291bnRzQ2hhbmdlZCIsImFjY291bnRzIiwibGVuZ3RoIiwiaGFuZGxlTmV0d29ya0NoYW5nZWQiLCJuZXR3b3JrSWQiLCJyZW1vdmVMaXN0ZW5lciIsInRyaWVkRWFnZXIiLCJzdGF0ZSIsInRyaWVkIiwiTWFpbiIsImxhenkiLCJXYWxsZXRNb2RhbCIsIlJvdXRlcyIsIkhlYWRlciIsIkZvb3RlciIsInByb2Nlc3MiLCJlbnYiLCJSRUFDVF9BUFBfRVRIX01BSU5ORVRfUlBDX1VSTF8xIiwiUkVBQ1RfQVBQX0VUSF9NQUlOTkVUX1JQQ19VUkxfMiIsImV4aXQiLCJSRUFDVF9BUFBfQkFDS0VORF9VUkwiLCJjb25maWciLCJSRUFDVF9BUFBfRVRIX01BSU5ORVRfQ0hBSU5fSUQiLCJycGNfdXJsMSIsInJwY191cmwyIiwiYmFja2VuZF91cmwiLCJkZWFjdGl2YXRlIiwic2V0SXRlbSIsImxvZ291dCIsInVzZUNhbGxiYWNrIiwicmVtb3ZlSXRlbSIsImNvbm5lY3RvcklkIiwiY3VycmVudENvbm5lY3RvciIsImNvbm5lY3RvclR5cGUiLCJhc3luYyIsImhhc1NldHVwIiwicHJvdmlkZXIiLCJldGhlcmV1bSIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJ0b1N0cmluZyIsInN3aXRjaEVycm9yIiwiY29kZSIsImNoYWluTmFtZSIsIm5hdGl2ZUN1cnJlbmN5IiwibmFtZSIsInN5bWJvbCIsImRlY2ltYWxzIiwicnBjVXJscyIsImdldFJQQyIsImJsb2NrRXhwbG9yZXJVcmxzIiwiYWRkRXJyb3IiLCJzZXR1cE5ldHdvcmsiLCJ1bmRlZmluZWQiLCJjYXRjaCIsImhhbmRsZURpc2Nvbm5lY3QiLCJtZXNzYWdlIiwidXNlQXBwRGlzcGF0Y2giLCJ1c2VBcHBTZWxlY3RvciIsInRyaWVkRWFnZXJTbGljZSIsImluaXRpYWxTdGF0ZSIsInJlZHVjZXJzIiwic2V0U3RhdGUiLCJhY3Rpb24iLCJwYXlsb2FkIiwiYWN0aW9ucyIsIlJQQ19VUkwiLCJDSEFJTl9JRCIsIkVycm9yIiwiTmFOIiwiaW5qZWN0ZWQiLCJzdXBwb3J0ZWRDaGFpbklkcyIsIm5ld0NoYWluSUQiLCJlbWl0RGVhY3RpdmF0ZSIsImVtaXRVcGRhdGUiLCJCaW5hbmNlQ2hhaW4iLCJ3YWxsZXRjb25uZWN0IiwicnBjIiwiYnJpZGdlIiwicXJjb2RlIiwicG9sbGluZ0ludGVydmFsIiwiZ2V0TGlicmFyeSIsIlJQQ19OT0RFUyIsImdldFJQQ05vZGVVcmwiLCJ1cmwiLCJjaGFpbklEIiwiZ2V0Q2hhaW5JRCIsInBhcnNlSW50Il0sInNvdXJjZVJvb3QiOiIifQ==