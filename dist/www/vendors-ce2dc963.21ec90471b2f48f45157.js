(self.webpackChunkhugiris_nft=self.webpackChunkhugiris_nft||[]).push([[4245],{26939:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});t=n(17187);var r=n(53653),o=function(e){var t;function n(t){t=(void 0===t?{}:t).supportedChainIds;var n=e.call(this)||this;return n.supportedChainIds=t,n}t=e,(o=n).prototype=Object.create(t.prototype),(o.prototype.constructor=o).__proto__=t;var o=n.prototype;return o.emitUpdate=function(e){this.emit(r._.Update,e)},o.emitError=function(e){this.emit(r._.Error,e)},o.emitDeactivate=function(){this.emit(r._.Deactivate)},n}(t.EventEmitter)},77044:function(e,t,n){"use strict";n.d(t,{Uu:function(){return _},Ht:function(){return k},Ge:function(){return T}});var r=n(67294),o=n(2177),s=n(53653),i=n(93286),a=n(38197);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){e.prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return(p=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&l(t,n.prototype),t}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function f(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function m(e){var t;return"string"==typeof e?(e=e.replace(/^Ox/,"0x"),t=Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10),Number.isNaN(t)&&(0,o.Z)(!1),t):(Number.isInteger(e)||(0,o.Z)(!1),e)}function v(e){"string"==typeof e&&e.match(/^(0x)?[0-9a-fA-F]{40}$/)||(0,o.Z)(!1);for(var t=(e="0x"===e.substring(0,2)?e:"0x"+e).toLowerCase().substring(2).split(""),n=new Uint8Array(40),r=0;r<40;r++)n[r]=t[r].charCodeAt(0);for(var s=(0,i.lE)((0,a.w)(n)),c=0;c<40;c+=2)8<=s[c>>1]>>4&&(t[c]=t[c].toUpperCase()),8<=(15&s[c>>1])&&(t[c+1]=t[c+1].toUpperCase());var u="0x"+t.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==u&&(0,o.Z)(!1),u}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var y,g=function(e,t){try{var n=function(n){return Promise.resolve(Promise.all([void 0===t.chainId?e.getChainId():t.chainId,void 0===t.account?e.getAccount():t.account])).then((function(t){var r=t[0];t=t[1],r=m(r);if(e.supportedChainIds&&!e.supportedChainIds.includes(r))throw new _(r,e.supportedChainIds);return t=null===t?t:v(t),{provider:n,chainId:r,account:t}}))},r=void 0===t.provider;return Promise.resolve(r?Promise.resolve(e.getProvider()).then(n):n(t.provider))}catch(t){return Promise.reject(t)}},w=function(e){function t(){var t=e.call(this)||this;return t.name=t.constructor.name,t}return u(t,e),t}(d(Error)),_=function(e){function t(t,n){var r=e.call(this)||this;return r.name=r.constructor.name,r.message="Unsupported chain id: "+t+". Supported chain ids are: "+n+".",r}return u(t,e),t}(d(Error));function b(e,t){var n=t.type,r=t.payload;switch(n){case y.ACTIVATE_CONNECTOR:return{connector:r.connector,provider:r.provider,chainId:r.chainId,account:r.account,onError:r.onError};case y.UPDATE:var o=r.provider,s=r.chainId,i=r.account;return c({},e,void 0===o?{}:{provider:o},void 0===s?{}:{chainId:s},void 0===i?{}:{account:i});case y.UPDATE_FROM_ERROR:return c({},e,void 0===(o=r.provider)?{}:{provider:o},void 0===(s=r.chainId)?{}:{chainId:s},void 0===(i=r.account)?{}:{account:i},{error:void 0});case y.ERROR:return o=r.error,{connector:e.connector,error:o,onError:e.onError};case y.ERROR_FROM_ACTIVATION:return{connector:r.connector,error:r.error};case y.DEACTIVATE_CONNECTOR:return{}}}(t=y=y||{})[t.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",t[t.UPDATE=1]="UPDATE",t[t.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",t[t.ERROR=3]="ERROR",t[t.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",t[t.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR";var C="primary",P={};var k=function(e){P[e]&&(0,o.Z)(!1),P[e]=(0,r.createContext)({activate:function(){try{return(0,o.Z)(!1),Promise.resolve()}catch(e){return Promise.reject(e)}},setError:function(){(0,o.Z)(!1)},deactivate:function(){(0,o.Z)(!1)},active:!1}),P[e].displayName="Web3ReactContext - "+e;var t=P[e].Provider;return function(e){var n,o,i,a,u,h,l,p,d=e.getLibrary,C=(e=e.children,A=(C=(0,r.useReducer)(b,{}))[0],n=C[1],o=A.connector,C=A.provider,E=A.chainId,R=A.account,i=A.onError,a=A.error,(u=(0,r.useRef)(-1)).current+=1,A=(0,r.useCallback)((function(e,t,r){void 0===r&&(r=!1);try{var o=u.current,s=!1;return Promise.resolve(f((function(){return Promise.resolve(e.activate().then((function(e){return s=!0,e}))).then((function(r){return Promise.resolve(g(e,r)).then((function(r){if(u.current>o)throw new w;n({type:y.ACTIVATE_CONNECTOR,payload:c({connector:e},r,{onError:t})})}))}))}),(function(o){if(o instanceof w)s&&e.deactivate();else{if(r)throw s&&e.deactivate(),o;t?(s&&e.deactivate(),t(o)):n({type:y.ERROR_FROM_ACTIVATION,payload:{connector:e,error:o}})}})))}catch(e){return Promise.reject(e)}}),[]),O=(0,r.useCallback)((function(e){n({type:y.ERROR,payload:{error:e}})}),[]),M=(0,r.useCallback)((function(){n({type:y.DEACTIVATE_CONNECTOR})}),[]),h=(0,r.useCallback)((function(e){try{if(!o)throw Error("This should never happen, it's just so Typescript stops complaining");var t=u.current;return Promise.resolve(function(){if(a)return f((function(){return Promise.resolve(g(o,e)).then((function(e){if(u.current>t)throw new w;n({type:y.UPDATE_FROM_ERROR,payload:e})}))}),(function(e){e instanceof w||(i?i(e):n({type:y.ERROR,payload:{error:e}}))}));var r,s=void 0===e.chainId?void 0:m(e.chainId);void 0!==s&&o.supportedChainIds&&!o.supportedChainIds.includes(s)?(r=new _(s,o.supportedChainIds),i?i(r):n({type:y.ERROR,payload:{error:r}})):(r="string"==typeof e.account?v(e.account):e.account,n({type:y.UPDATE,payload:{provider:e.provider,chainId:s,account:r}}))}())}catch(e){return Promise.reject(e)}}),[o,a,i]),l=(0,r.useCallback)((function(e){i?i(e):n({type:y.ERROR,payload:{error:e}})}),[i]),p=(0,r.useCallback)((function(){n({type:y.DEACTIVATE_CONNECTOR})}),[]),(0,r.useEffect)((function(){return function(){o&&o.deactivate()}}),[o]),(0,r.useEffect)((function(){return o&&o.on(s._.Update,h).on(s._.Error,l).on(s._.Deactivate,p),function(){o&&o.off(s._.Update,h).off(s._.Error,l).off(s._.Deactivate,p)}}),[o,h,l,p]),{connector:o,provider:C,chainId:E,account:R,activate:A,setError:O,deactivate:M,error:a}),P=C.connector,k=C.provider,T=C.chainId,E=C.account,R=C.activate,A=C.setError,O=C.deactivate,M=C.error,S=void 0!==P&&void 0!==T&&void 0!==E&&!M;C=(0,r.useMemo)((function(){return S&&void 0!==T&&Number.isInteger(T)&&P?d(k,P):void 0}),[S,d,k,P,T]);return r.createElement(t,{value:{connector:P,library:C,chainId:T,account:E,activate:R,setError:A,deactivate:O,active:S,error:M}},e)}}(C);function T(e){return(0,r.useContext)((void 0===(e=e)&&(e=C),Object.keys(P).includes(e)||(0,o.Z)(!1),P[e]))}},30950:function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,n){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&i(t,n.prototype),t}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function l(e){return e.hasOwnProperty("result")?e.result:e}n.d(t,{_k:function(){return f},A5:function(){return p},ab:function(){return d}}),t=n(26939),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var p=function(e){function t(){var t=e.call(this)||this;return t.name=t.constructor.name,t.message="No Ethereum provider was found on window.ethereum.",t}return o(t,e),t}(c(Error)),d=function(e){function t(){var t=e.call(this)||this;return t.name=t.constructor.name,t.message="The user rejected the request.",t}return o(t,e),t}(c(Error)),f=function(e){function t(t){return(t=e.call(this,t)||this).handleNetworkChanged=t.handleNetworkChanged.bind(u(t)),t.handleChainChanged=t.handleChainChanged.bind(u(t)),t.handleAccountsChanged=t.handleAccountsChanged.bind(u(t)),t.handleClose=t.handleClose.bind(u(t)),t}o(t,e);var n=t.prototype;return n.handleChainChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},n.handleAccountsChanged=function(e){0===e.length?this.emitDeactivate():this.emitUpdate({account:e[0]})},n.handleClose=function(e,t){this.emitDeactivate()},n.handleNetworkChanged=function(e){this.emitUpdate({chainId:e,provider:window.ethereum})},n.activate=function(){try{var e,t=function(t){if(n)return t;function o(){return r({provider:window.ethereum},e?{account:e}:{})}return(t=function(){if(!e)return Promise.resolve(window.ethereum.enable().then((function(e){return e&&l(e)[0]}))).then((function(t){e=t}))}())&&t.then?t.then(o):o()},n=!1;if(!window.ethereum)throw new p;window.ethereum.on&&(window.ethereum.on("chainChanged",this.handleChainChanged),window.ethereum.on("accountsChanged",this.handleAccountsChanged),window.ethereum.on("close",this.handleClose),window.ethereum.on("networkChanged",this.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var o=h((function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then((function(e){return l(e)[0]}))).then((function(t){e=t}))}),(function(e){if(4001===e.code)throw new d}));return Promise.resolve(o&&o.then?o.then(t):t(o))}catch(t){return Promise.reject(t)}},n.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(e){return Promise.reject(e)}},n.getChainId=function(){try{var e,t=function(){function t(){if(!e)try{e=l(window.ethereum.send({method:"net_version"}))}catch(e){}return e=e||(window.ethereum.isDapper?l(window.ethereum.cachedResults.net_version):window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId)}var n=function(){if(!e){var t=h((function(){return Promise.resolve(window.ethereum.send("net_version").then(l)).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return n&&n.then?n.then(t):t()};if(!window.ethereum)throw new p;var n=h((function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(l)).then((function(t){e=t}))}),(function(){}));return Promise.resolve(n&&n.then?n.then(t):t())}catch(t){return Promise.reject(t)}},n.getAccount=function(){try{var e,t=function(){function t(){return e=e||l(window.ethereum.send({method:"eth_accounts"}))[0]}var n=function(){if(!e){var t=h((function(){return Promise.resolve(window.ethereum.enable().then((function(e){return l(e)[0]}))).then((function(t){e=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return n&&n.then?n.then(t):t()};if(!window.ethereum)throw new p;var n=h((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return l(e)[0]}))).then((function(t){e=t}))}),(function(){}));return Promise.resolve(n&&n.then?n.then(t):t())}catch(t){return Promise.reject(t)}},n.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},n.isAuthorized=function(){try{return window.ethereum?Promise.resolve(h((function(){return Promise.resolve(window.ethereum.send("eth_accounts").then((function(e){return 0<l(e).length})))}),(function(){return!1}))):Promise.resolve(!1)}catch(e){return Promise.reject(e)}},t}(t.Q)},53653:function(e,t,n){"use strict";var r;n.d(t,{_:function(){return r}}),(n=r=r||{}).Update="Web3ReactUpdate",n.Error="Web3ReactError",n.Deactivate="Web3ReactDeactivate"},83929:function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),s(e.prototype.constructor=e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t,n){return(i=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&s(t,n.prototype),t}).apply(null,arguments)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{ab:function(){return c},zw:function(){return u}}),t=n(26939);var c=function(e){function t(){var t=e.call(this)||this;return t.name=t.constructor.name,t.message="The user rejected the request.",t}return r(t,e),t}(function(e){var t="function"==typeof Map?new Map:void 0;return function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)}(e)}(Error)),u=function(e){function t(t){var n,r=e.call(this,{supportedChainIds:(r=(n=t).supportedChainIds,n=n.rpc,r||(n?Object.keys(n).map((function(e){return Number(e)})):void 0))})||this;return r.config=t,r.handleChainChanged=r.handleChainChanged.bind(a(r)),r.handleAccountsChanged=r.handleAccountsChanged.bind(a(r)),r.handleDisconnect=r.handleDisconnect.bind(a(r)),r}r(t,e);var o=t.prototype;return o.handleChainChanged=function(e){this.emitUpdate({chainId:e})},o.handleAccountsChanged=function(e){this.emitUpdate({account:e[0]})},o.handleDisconnect=function(){this.emitDeactivate(),this.walletConnectProvider&&(this.walletConnectProvider.stop(),this.walletConnectProvider.removeListener("chainChanged",this.handleChainChanged),this.walletConnectProvider.removeListener("accountsChanged",this.handleAccountsChanged),this.walletConnectProvider=void 0),this.emitDeactivate()},o.activate=function(){try{var e=this,t=function(){function t(){return Promise.resolve(e.walletConnectProvider.enable().then((function(e){return e[0]})).catch((function(e){if("User closed modal"===e.message)throw new c;throw e}))).then((function(t){return e.walletConnectProvider.on("disconnect",e.handleDisconnect),e.walletConnectProvider.on("chainChanged",e.handleChainChanged),e.walletConnectProvider.on("accountsChanged",e.handleAccountsChanged),{provider:e.walletConnectProvider,account:t}}))}var n=function(){if(!e.walletConnectProvider.wc.connected)return Promise.resolve(e.walletConnectProvider.wc.createSession({chainId:e.supportedChainIds&&0<e.supportedChainIds.length?e.supportedChainIds[0]:1})).then((function(){e.emit("URI_AVAILABLE",e.walletConnectProvider.wc.uri)}))}();return n&&n.then?n.then(t):t()},r=function(){if(!e.walletConnectProvider)return Promise.resolve(Promise.all([n.e(4658),n.e(3738),n.e(944),n.e(813),n.e(9521),n.e(4912),n.e(9557),n.e(8384),n.e(2827),n.e(1715),n.e(9806),n.e(3278),n.e(1565),n.e(4735),n.e(4625),n.e(2329),n.e(6882),n.e(1106),n.e(5187),n.e(2972),n.e(4581),n.e(2506),n.e(8825),n.e(8490),n.e(1680),n.e(3964),n.e(7715),n.e(9842),n.e(5526),n.e(1771),n.e(8811),n.e(4211),n.e(2492),n.e(3923),n.e(483),n.e(9920),n.e(5457),n.e(7010),n.e(7219),n.e(8059),n.e(4245),n.e(3707),n.e(4962),n.e(6563)]).then(n.bind(n,72485)).then((function(e){var t;return null!=(t=null==e?void 0:e.default)?t:e}))).then((function(t){e.walletConnectProvider=new t(e.config)}))}();return Promise.resolve(r&&r.then?r.then(t):t())}catch(t){return Promise.reject(t)}},o.getProvider=function(){try{return Promise.resolve(this.walletConnectProvider)}catch(e){return Promise.reject(e)}},o.getChainId=function(){try{return Promise.resolve(this.walletConnectProvider.send("eth_chainId"))}catch(e){return Promise.reject(e)}},o.getAccount=function(){try{return Promise.resolve(this.walletConnectProvider.send("eth_accounts").then((function(e){return e[0]})))}catch(e){return Promise.reject(e)}},o.deactivate=function(){this.walletConnectProvider&&(this.walletConnectProvider.stop(),this.walletConnectProvider.removeListener("disconnect",this.handleDisconnect),this.walletConnectProvider.removeListener("chainChanged",this.handleChainChanged),this.walletConnectProvider.removeListener("accountsChanged",this.handleAccountsChanged))},o.close=function(){try{var e;return Promise.resolve(null==(e=this.walletConnectProvider)?void 0:e.close()).then((function(){}))}catch(e){return Promise.reject(e)}},t}(t.Q)},12906:function(e,t,n){var r=n(25108);const o=n(17187).EventEmitter,s=n(89539).inherits,i=n(21964),a=n(75012),c=n(94005),u=n(94282),h=n(52698);n(6496);const l=n(39728);function p(e){var t=this,n=(o.call(t),t.setMaxListeners(30),e=e||{},{sendAsync:t._handleAsync.bind(t)});n=e.blockTrackerProvider||n;t._blockTracker=e.blockTracker||new a({provider:n,pollingInterval:e.pollingInterval||4e3,setSkipCacheFlag:!0}),t._ready=new h,t.currentBlock=null,t._providers=[]}e.exports=p,s(p,o),p.prototype.start=function(e=0){const t=this;t._ready.go(),t._blockTracker.on("latest",(e=>{t._getBlockByNumberWithRetry(e,((e,n)=>{if(e)this.emit("error",e);else{if(!n)return r.log(n),void this.emit("error",new Error("Could not find block"));e=n,e={number:i.toBuffer(e.number),hash:i.toBuffer(e.hash),parentHash:i.toBuffer(e.parentHash),nonce:i.toBuffer(e.nonce),mixHash:i.toBuffer(e.mixHash),sha3Uncles:i.toBuffer(e.sha3Uncles),logsBloom:i.toBuffer(e.logsBloom),transactionsRoot:i.toBuffer(e.transactionsRoot),stateRoot:i.toBuffer(e.stateRoot),receiptsRoot:i.toBuffer(e.receiptRoot||e.receiptsRoot),miner:i.toBuffer(e.miner),difficulty:i.toBuffer(e.difficulty),totalDifficulty:i.toBuffer(e.totalDifficulty),size:i.toBuffer(e.size),extraData:i.toBuffer(e.extraData),gasLimit:i.toBuffer(e.gasLimit),gasUsed:i.toBuffer(e.gasUsed),timestamp:i.toBuffer(e.timestamp),transactions:e.transactions},t._setCurrentBlock(e),t.emit("rawBlock",n),t.emit("latest",n)}}))})),t._blockTracker.on("sync",t.emit.bind(t,"sync")),t._blockTracker.on("error",t.emit.bind(t,"error")),t._running=!0,t.emit("start")},p.prototype.stop=function(){this._blockTracker.removeAllListeners(),this._running=!1,this.emit("stop")},p.prototype.isRunning=function(){return this._running},p.prototype.addProvider=function(e,t){"number"==typeof t?this._providers.splice(t,0,e):this._providers.push(e),e.setEngine(this)},p.prototype.removeProvider=function(e){if((e=this._providers.indexOf(e))<0)throw new Error("Provider not found.");this._providers.splice(e,1)},p.prototype.send=function(e){throw new Error("Web3ProviderEngine does not support synchronous requests.")},p.prototype.sendAsync=function(e,t){const n=this;n._ready.await((function(){Array.isArray(e)?c(e,n._handleAsync.bind(n),t):n._handleAsync(e,t)}))},p.prototype._getBlockByNumberWithRetry=function(e,t){const n=this;let r=5;function o(){n._getBlockByNumber(e,s)}function s(e,n){return e?t(e):n?void t(null,n):0<r?(r--,void setTimeout((function(){o()}),1e3)):void t(null,null)}o()},p.prototype._getBlockByNumber=function(e,t){e=l({method:"eth_getBlockByNumber",params:[e,!1],skipCache:!0}),this._handleAsync(e,((e,n)=>e?t(e):t(null,n.result)))},p.prototype._handleAsync=function(e,t){var n=this,r=-1,o=null,s=null,i=[];function a(n,r){s=n,o=r,u(i,(function(e,t){e?e(s,o,t):t()}),(function(){var n={id:e.id,jsonrpc:e.jsonrpc,result:o};null!=s?(n.error={message:s.stack||s.message||s,code:-32e3},t(s,n)):t(null,n)}))}!function t(o){if(r+=1,i.unshift(o),r>=n._providers.length)a(new Error('Request for method "'+e.method+'" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'));else try{n._providers[r].handleRequest(e,t,a)}catch(t){a(t)}}()},p.prototype._setCurrentBlock=function(e){this.currentBlock=e,this.emit("block",e)}},41955:function(e,t,n){var r=n(6403);const o=n(37870);e.exports=class extends r{constructor(e){super((({blockTracker:t})=>o(Object.assign({blockTracker:t},e))))}}},28260:function(e,t,n){var r=n(6403);const o=n(98406);e.exports=class extends r{constructor(){super((({blockTracker:e,provider:t})=>o({blockTracker:e,provider:t})))}}},2110:function(e,t,n){const r=n(89539).inherits;function o(e){this.staticResponses=e=e||{}}n=n(30398),e.exports=o,r(o,n),o.prototype.handleRequest=function(e,t,n){var r=this.staticResponses[e.method];"function"==typeof r?r(e,t,n):void 0!==r?setTimeout((()=>n(null,r))):t()}},78747:function(e,t,n){var r=n(25108);const o=n(7879),s=n(80047),i=n(89539).inherits,a=n(21964),c=n(2843),u=n(47529),h=n(80045);var l=n(30398);const p=n(28372),d=/^[0-9A-Fa-f]+$/g;function f(e){var t=this;t.nonceLock=h(1),e.getAccounts&&(t.getAccounts=e.getAccounts),e.processTransaction&&(t.processTransaction=e.processTransaction),e.processMessage&&(t.processMessage=e.processMessage),e.processPersonalMessage&&(t.processPersonalMessage=e.processPersonalMessage),e.processTypedMessage&&(t.processTypedMessage=e.processTypedMessage),t.approveTransaction=e.approveTransaction||t.autoApprove,t.approveMessage=e.approveMessage||t.autoApprove,t.approvePersonalMessage=e.approvePersonalMessage||t.autoApprove,t.approveDecryptMessage=e.approveDecryptMessage||t.autoApprove,t.approveEncryptionPublicKey=e.approveEncryptionPublicKey||t.autoApprove,t.approveTypedMessage=e.approveTypedMessage||t.autoApprove,e.signTransaction&&(t.signTransaction=e.signTransaction||w("signTransaction")),e.signMessage&&(t.signMessage=e.signMessage||w("signMessage")),e.signPersonalMessage&&(t.signPersonalMessage=e.signPersonalMessage||w("signPersonalMessage")),e.decryptMessage&&(t.decryptMessage=e.decryptMessage||w("decryptMessage")),e.encryptionPublicKey&&(t.encryptionPublicKey=e.encryptionPublicKey||w("encryptionPublicKey")),e.signTypedMessage&&(t.signTypedMessage=e.signTypedMessage||w("signTypedMessage")),e.recoverPersonalSignature&&(t.recoverPersonalSignature=e.recoverPersonalSignature),e.publishTransaction&&(t.publishTransaction=e.publishTransaction),t.estimateGas=e.estimateGas||t.estimateGas,t.getGasPrice=e.getGasPrice||t.getGasPrice}function m(e){return e.toLowerCase()}function v(e){return e=a.addHexPrefix(e),a.isValidAddress(e)}function y(e){var t=a.addHexPrefix(e);return!a.isValidAddress(t)&&g(e)}function g(e){if("string"!=typeof e)return!1;if("0x"!==e.slice(0,2))return!1;return e.slice(2).match(d)}function w(e){return function(t,n){n(new Error('ProviderEngine - HookedWalletSubprovider - Must provide "'+e+'" fn in constructor options'))}}e.exports=f,i(f,l),f.prototype.handleRequest=function(e,t,n){const s=this;let i,a,c,h,l;switch(s._parityRequests={},s._parityRequestCount=0,e.method){case"eth_coinbase":case"parity_defaultAccount":return void s.getAccounts((function(e,t){if(e)return n(e);e=t[0]||null,n(null,e)}));case"eth_accounts":return void s.getAccounts((function(e,t){if(e)return n(e);n(null,t)}));case"eth_sendTransaction":return i=e.params[0],void o([e=>s.validateTransaction(i,e),e=>s.processTransaction(i,e)],n);case"eth_signTransaction":return i=e.params[0],void o([e=>s.validateTransaction(i,e),e=>s.processSignTransaction(i,e)],n);case"eth_sign":return l=e.params[0],h=e.params[1],c=e.params[2]||{},a=u(c,{from:l,data:h}),void o([e=>s.validateMessage(a,e),e=>s.processMessage(a,e)],n);case"personal_sign":return f=e.params[0],y(e.params[1])&&v(f)?(r.warn("The eth_personalSign method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future."),l=e.params[0],h=e.params[1]):(h=e.params[0],l=e.params[1]),c=e.params[2]||{},a=u(c,{from:l,data:h}),void o([e=>s.validatePersonalMessage(a,e),e=>s.processPersonalMessage(a,e)],n);case"eth_decryptMessage":return f=e.params[0],y(e.params[1])&&v(f)?(r.warn("The eth_decryptMessage method requires params ordered [message, address]. This was previously handled incorrectly, and has been corrected automatically. Please switch this param order for smooth behavior in the future."),l=e.params[0],h=e.params[1]):(h=e.params[0],l=e.params[1]),c=e.params[2]||{},a=u(c,{from:l,data:h}),void o([e=>s.validateDecryptMessage(a,e),e=>s.processDecryptMessage(a,e)],n);case"encryption_public_key":{const t=e.params[0];return void o([e=>s.validateEncryptionPublicKey(t,e),e=>s.processEncryptionPublicKey(t,e)],n)}case"personal_ecRecover":return h=e.params[0],d=e.params[1],c=e.params[2]||{},a=u(c,{sig:d,data:h}),void s.recoverPersonalSignature(a,n);case"eth_signTypedData":case"eth_signTypedData_v3":case"eth_signTypedData_v4":return d=e.params[0],p=e.params[1],v(d)?(l=d,h=p):(h=d,l=p),c=e.params[2]||{},a=u(c,{from:l,data:h}),void o([e=>s.validateTypedMessage(a,e),e=>s.processTypedMessage(a,e)],n);case"parity_postTransaction":return i=e.params[0],void s.parityPostTransaction(i,n);case"parity_postSign":return l=e.params[0],h=e.params[1],void s.parityPostSign(l,h,n);case"parity_checkRequest":return p=e.params[0],void s.parityCheckRequest(p,n);default:return void t()}var p,d,f},f.prototype.getAccounts=function(e){e(null,[])},f.prototype.processTransaction=function(e,t){const n=this;o([t=>n.approveTransaction(e,t),(e,t)=>n.checkApproval("transaction",e,t),t=>n.finalizeAndSubmitTx(e,t)],t)},f.prototype.processSignTransaction=function(e,t){const n=this;o([t=>n.approveTransaction(e,t),(e,t)=>n.checkApproval("transaction",e,t),t=>n.finalizeTx(e,t)],t)},f.prototype.processMessage=function(e,t){const n=this;o([t=>n.approveMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signMessage(e,t)],t)},f.prototype.processPersonalMessage=function(e,t){const n=this;o([t=>n.approvePersonalMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signPersonalMessage(e,t)],t)},f.prototype.processDecryptMessage=function(e,t){const n=this;o([t=>n.approveDecryptMessage(e,t),(e,t)=>n.checkApproval("decryptMessage",e,t),t=>n.decryptMessage(e,t)],t)},f.prototype.processEncryptionPublicKey=function(e,t){const n=this;o([t=>n.approveEncryptionPublicKey(e,t),(e,t)=>n.checkApproval("encryptionPublicKey",e,t),t=>n.encryptionPublicKey(e,t)],t)},f.prototype.processTypedMessage=function(e,t){const n=this;o([t=>n.approveTypedMessage(e,t),(e,t)=>n.checkApproval("message",e,t),t=>n.signTypedMessage(e,t)],t)},f.prototype.autoApprove=function(e,t){t(null,!0)},f.prototype.checkApproval=function(e,t,n){n(t?null:new Error("User denied "+e+" signature."))},f.prototype.parityPostTransaction=function(e,t){const n=this,r="0x"+n._parityRequestCount.toString(16);n._parityRequestCount++,n.emitPayload({method:"eth_sendTransaction",params:[e]},(function(e,t){e?n._parityRequests[r]={error:e}:(e=t.result,n._parityRequests[r]=e)})),t(null,r)},f.prototype.parityPostSign=function(e,t,n){const r=this,o="0x"+r._parityRequestCount.toString(16);r._parityRequestCount++,r.emitPayload({method:"eth_sign",params:[e,t]},(function(e,t){e?r._parityRequests[o]={error:e}:(e=t.result,r._parityRequests[o]=e)})),n(null,o)},f.prototype.parityCheckRequest=function(e,t){return(e=this._parityRequests[e]||null)?e.error?t(e.error):void t(null,e):t(null,null)},f.prototype.recoverPersonalSignature=function(e,t){let n;try{n=c.recoverPersonalSignature(e)}catch(e){return t(e)}t(null,n)},f.prototype.validateTransaction=function(e,t){if(void 0===e.from)return t(new Error("Undefined address - from address required to sign transaction."));this.validateSender(e.from,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to sign transaction for this address: "${e.from}"`))}))},f.prototype.validateMessage=function(e,t){if(void 0===e.from)return t(new Error("Undefined address - from address required to sign message."));this.validateSender(e.from,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))}))},f.prototype.validatePersonalMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to sign personal message.")):void 0===e.data?t(new Error("Undefined message - message required to sign personal message.")):g(e.data)?void this.validateSender(e.from,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))})):t(new Error("HookedWalletSubprovider - validateMessage - message was not encoded as hex."))},f.prototype.validateDecryptMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to decrypt message.")):void 0===e.data?t(new Error("Undefined message - message required to decrypt message.")):g(e.data)?void this.validateSender(e.from,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to decrypt message for this address: "${e.from}"`))})):t(new Error("HookedWalletSubprovider - validateDecryptMessage - message was not encoded as hex."))},f.prototype.validateEncryptionPublicKey=function(e,t){this.validateSender(e,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to obtain encryption public key for this address: "${e}"`))}))},f.prototype.validateTypedMessage=function(e,t){return void 0===e.from?t(new Error("Undefined address - from address required to sign typed data.")):void 0===e.data?t(new Error("Undefined data - message required to sign typed data.")):void this.validateSender(e.from,(function(n,r){return n?t(n):r?void t():t(new Error(`Unknown address - unable to sign message for this address: "${e.from}"`))}))},f.prototype.validateSender=function(e,t){if(!e)return t(null,!1);this.getAccounts((function(n,r){if(n)return t(n);n=-1!==r.map(m).indexOf(e.toLowerCase()),t(null,n)}))},f.prototype.finalizeAndSubmitTx=function(e,t){const n=this;n.nonceLock.take((function(){o([n.fillInTxExtras.bind(n,e),n.signTransaction.bind(n),n.publishTransaction.bind(n)],(function(e,r){if(n.nonceLock.leave(),e)return t(e);t(null,r)}))}))},f.prototype.finalizeTx=function(e,t){const n=this;n.nonceLock.take((function(){o([n.fillInTxExtras.bind(n,e),n.signTransaction.bind(n)],(function(r,o){if(n.nonceLock.leave(),r)return t(r);t(null,{raw:o,tx:e})}))}))},f.prototype.publishTransaction=function(e,t){this.emitPayload({method:"eth_sendRawTransaction",params:[e]},(function(e,n){if(e)return t(e);t(null,n.result)}))},f.prototype.estimateGas=function(e,t){p(this.engine,e,t)},f.prototype.getGasPrice=function(e){this.emitPayload({method:"eth_gasPrice",params:[]},(function(t,n){if(t)return e(t);e(null,n.result)}))},f.prototype.fillInTxExtras=function(e,t){var n=this,r=e.from;const o={};void 0===e.gasPrice&&(o.gasPrice=n.getGasPrice.bind(n)),void 0===e.nonce&&(o.nonce=n.emitPayload.bind(n,{method:"eth_getTransactionCount",params:[r,"pending"]})),void 0===e.gas&&(o.gas=n.estimateGas.bind(n,{from:e.from,to:e.to,value:e.value,data:e.data,gas:e.gas,gasPrice:e.gasPrice,nonce:e.nonce})),s(o,(function(n,r){if(n)return t(n);const o={};r.gasPrice&&(o.gasPrice=r.gasPrice),r.nonce&&(o.nonce=r.nonce.result),r.gas&&(o.gas=r.gas),t(null,u(e,o))}))}},6403:function(e,t,n){n=n(30398);e.exports=class extends n{constructor(e){if(super(),!e)throw new Error("JsonRpcEngineMiddlewareSubprovider - no constructorFn specified");this._constructorFn=e}setEngine(e){if(this.middleware)throw new Error("JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice");var t=e._blockTracker;if(!(e=this._constructorFn({engine:e,provider:e,blockTracker:t})))throw new Error("JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware");if("function"!=typeof e)throw new Error("JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function");this.middleware=e}handleRequest(e,t,n){const r={id:e.id};this.middleware(e,r,(function(e){t(((t,n,o)=>{t?(delete r.result,r.error={message:t.message||t}):r.result=n,e?e(o):o()}))}),(function(e){if(e)return n(e);n(null,r.result)}))}}},3621:function(e,t,n){var r=n(23085).Buffer;const o=n(89539).inherits,s=n(29847),i=n(21964);var a=n(30398);const c=n(6496).blockTagForPayload;function u(e){this.nonceCache={}}e.exports=u,o(u,a),u.prototype.handleRequest=function(e,t,n){const o=this;switch(e.method){case"eth_getTransactionCount":var a=c(e),u=e.params[0].toLowerCase(),h=o.nonceCache[u];return void("pending"===a?h?n(null,h):t((function(e,t,n){if(e)return n();void 0===o.nonceCache[u]&&(o.nonceCache[u]=t),n()})):t());case"eth_sendRawTransaction":return void t((function(t,n,a){if(t)return a();t=e.params[0];var c="0x"+(t=(i.stripHexPrefix(t),r.from(i.stripHexPrefix(t),"hex"),new s(r.from(i.stripHexPrefix(t),"hex")))).getSenderAddress().toString("hex").toLowerCase();t=i.bufferToInt(t.nonce),t="0x"+(t=(t=(++t).toString(16)).length%2?"0"+t:t);o.nonceCache[c]=t,a()}));case"evm_revert":return o.nonceCache={},void t();default:return void t()}}},30398:function(e,t,n){const r=n(39728);function o(){}(e.exports=o).prototype.setEngine=function(e){const t=this;t.engine||((t.engine=e).on("block",(function(e){t.currentBlock=e})),e.on("start",(function(){t.start()})),e.on("stop",(function(){t.stop()})))},o.prototype.handleRequest=function(e,t,n){throw new Error("Subproviders should override `handleRequest`.")},o.prototype.emitPayload=function(e,t){this.engine.sendAsync(r(e),t)},o.prototype.stop=function(){},o.prototype.start=function(){}},78191:function(e,t,n){var r=n(6403);const o=n(68961);e.exports=class extends r{constructor(){super((({blockTracker:e,provider:t,engine:n})=>{const{events:r,middleware:s}=o({blockTracker:e,provider:t});return r.on("notification",(e=>n.emit("data",null,e))),s}))}}},39728:function(e,t,n){const r=n(88620),o=n(47529);e.exports=function(e){return o({id:r(),jsonrpc:"2.0",params:[]},e)}},28372:function(e,t,n){const r=n(39728);e.exports=function(e,t,n){e.sendAsync(r({method:"eth_estimateGas",params:[t]}),(function(e,t){if(e)return"no contract code at given address"===e.message?n(null,"0xcf08"):n(e);n(null,t.result)}))}},88620:function(e){e.exports=function(){return Math.floor(Number.MAX_SAFE_INTEGER*Math.random())}},6496:function(e,t,n){const r=n(67266);function o(e){return"never"!==a(e)}function s(e){var t=i(e);return t>=e.params.length?e.params:"eth_getBlockByNumber"===e.method?e.params.slice(1):e.params.slice(0,t)}function i(e){switch(e.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":return 1;case"eth_getBlockByNumber":return 0;default:return}}function a(e){switch(e.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":return"fork";case"eth_gasPrice":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"eth_blockNumber":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":return"never"}}e.exports={cacheIdentifierForPayload:function(e,t={}){return o(e)?(t=(t=t.includeBlockRef)?e.params:s(e),e.method+":"+r(t)):null},canCache:o,blockTagForPayload:function(e){var t=i(e);return t>=e.params.length?null:e.params[t]},paramsWithoutBlockTag:s,blockTagParamIndex:i,cacheTypeForPayload:a}},52698:function(e,t,n){const r=n(17187).EventEmitter,o=n(89539).inherits;function s(){r.call(this),this.isLocked=!0}e.exports=s,o(s,r),s.prototype.go=function(){this.isLocked=!1,this.emit("unlock")},s.prototype.stop=function(){this.isLocked=!0,this.emit("lock")},s.prototype.await=function(e){this.isLocked?this.once("unlock",e):setTimeout(e)}},34351:function(e,t,n){function r(e,t){this.withCredentials=(t=t||{}).withCredentials||!1,this.timeout=t.timeout||0,this.headers=t.headers,this.agent=t.agent,t=(this.connected=!1)!==t.keepAlive,this.host=e||"http://localhost:8545",this.agent||("https"===this.host.substring(0,5)?this.httpsAgent=new a.Agent({keepAlive:t}):this.httpAgent=new i.Agent({keepAlive:t}))}var o=n(84390).errors,s=n(59536).XMLHttpRequest,i=n(8501),a=n(79267);r.prototype._prepareRequest=function(){var e,t;return"undefined"!=typeof XMLHttpRequest?e=new XMLHttpRequest:(e=new s,t={httpsAgent:this.httpsAgent,httpAgent:this.httpAgent,baseUrl:this.baseUrl},this.agent&&(t.httpsAgent=this.agent.https,t.httpAgent=this.agent.http,t.baseUrl=this.agent.baseUrl),e.nodejsSet(t)),e.open("POST",this.host,!0),e.setRequestHeader("Content-Type","application/json"),e.timeout=this.timeout,e.withCredentials=this.withCredentials,this.headers&&this.headers.forEach((function(t){e.setRequestHeader(t.name,t.value)})),e},r.prototype.send=function(e,t){var n=this,r=this._prepareRequest();r.onreadystatechange=function(){if(4===r.readyState&&1!==r.timeout){var e=r.responseText,s=null;try{e=JSON.parse(e)}catch(e){s=o.InvalidResponse(r.responseText)}n.connected=!0,t(s,e)}},r.ontimeout=function(){n.connected=!1,t(o.ConnectionTimeout(this.timeout))};try{r.send(JSON.stringify(e))}catch(e){this.connected=!1,t(o.InvalidConnection(this.host))}},r.prototype.disconnect=function(){},r.prototype.supportsSubscriptions=function(){return!1},e.exports=r},73097:function(e,t,n){"use strict";function r(e,t){function n(e){var t=null;Array.isArray(e)?e.forEach((function(e){r.responseCallbacks[e.id]&&(t=e.id)})):t=e.id,t||-1===e.method.indexOf("_subscription")?r.responseCallbacks[t]&&(r.responseCallbacks[t](null,e),delete r.responseCallbacks[t]):r.notificationCallbacks.forEach((function(t){"function"==typeof t&&t(e)}))}var r=this;this.responseCallbacks={},this.notificationCallbacks=[],this.path=e,this.connected=!1,this.connection=t.connect({path:this.path}),this.addDefaultEvents(),"Socket"===t.constructor.name?s(this.connection).done(n):this.connection.on("data",(function(e){r._parseResponse(e.toString()).forEach(n)}))}var o=n(84390).errors,s=n(43455);r.prototype.addDefaultEvents=function(){var e=this;this.connection.on("connect",(function(){e.connected=!0})),this.connection.on("close",(function(){e.connected=!1})),this.connection.on("error",(function(){e._timeout()})),this.connection.on("end",(function(){e._timeout()})),this.connection.on("timeout",(function(){e._timeout()}))},r.prototype._parseResponse=function(e){var t=this,n=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(e){t.lastChunk&&(e=t.lastChunk+e);var r=null;try{r=JSON.parse(e)}catch(r){return t.lastChunk=e,clearTimeout(t.lastChunkTimeout),void(t.lastChunkTimeout=setTimeout((function(){throw t._timeout(),o.InvalidResponse(e)}),15e3))}clearTimeout(t.lastChunkTimeout),t.lastChunk=null,r&&n.push(r)})),n},r.prototype._addResponseCallback=function(e,t){var n=e.id||e[0].id;e=e.method||e[0].method;this.responseCallbacks[n]=t,this.responseCallbacks[n].method=e},r.prototype._timeout=function(){for(var e in this.responseCallbacks)this.responseCallbacks.hasOwnProperty(e)&&(this.responseCallbacks[e](o.InvalidConnection("on IPC")),delete this.responseCallbacks[e])},r.prototype.reconnect=function(){this.connection.connect({path:this.path})},r.prototype.send=function(e,t){this.connection.writable||this.connection.connect({path:this.path}),this.connection.write(JSON.stringify(e)),this._addResponseCallback(e,t)},r.prototype.on=function(e,t){if("function"!=typeof t)throw new Error("The second parameter callback must be a function.");"data"===e?this.notificationCallbacks.push(t):this.connection.on(e,t)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new Error("The second parameter callback must be a function.");this.connection.once(e,t)},r.prototype.removeListener=function(e,t){var n=this;"data"===e?this.notificationCallbacks.forEach((function(e,r){e===t&&n.notificationCallbacks.splice(r,1)})):this.connection.removeListener(e,t)},r.prototype.removeAllListeners=function(e){"data"===e?this.notificationCallbacks=[]:this.connection.removeAllListeners(e)},r.prototype.reset=function(){this._timeout(),this.notificationCallbacks=[],this.connection.removeAllListeners("error"),this.connection.removeAllListeners("end"),this.connection.removeAllListeners("timeout"),this.addDefaultEvents()},r.prototype.supportsSubscriptions=function(){return!0},e.exports=r},91057:function(e,t,n){var r,o,s=n(34155),i=n(23085).Buffer,a=(s="[object process]"===Object.prototype.toString.call(void 0!==s?s:0),"undefined"!=typeof navigator&&"ReactNative"===navigator.product),c=null;o=s||a?(c=function(e){return i.from(e).toString("base64")},(s=n(8575)).URL?(r=s.URL,function(e){return new r(e)}):n(8575).parse):(c=btoa.bind(window),function(e){return new URL(e)}),e.exports={parseURL:o,btoa:c}},69556:function(e,t,n){"use strict";function r(e,t){o.call(this),t=t||{},this.url=e,this._customTimeout=t.timeout||15e3,this.headers=t.headers||{},this.protocol=t.protocol||void 0,this.reconnectOptions=Object.assign({auto:!1,delay:5e3,maxAttempts:!1,onTimeout:!1},t.reconnect),this.clientConfig=t.clientConfig||void 0,this.requestOptions=t.requestOptions||void 0,this.DATA="data",this.CLOSE="close",this.ERROR="error",this.CONNECT="connect",this.RECONNECT="reconnect",this.connection=null,this.requestQueue=new Map,this.responseQueue=new Map,this.reconnectAttempts=0,this.reconnecting=!1,(t=s.parseURL(e)).username&&t.password&&(this.headers.authorization="Basic "+s.btoa(t.username+":"+t.password)),t.auth&&(this.headers.authorization="Basic "+s.btoa(t.auth)),Object.defineProperty(this,"connected",{get:function(){return this.connection&&this.connection.readyState===this.connection.OPEN},enumerable:!0}),this.connect()}var o=n(26729),s=n(91057),i=n(84390).errors,a=n(45840).w3cwebsocket;((r.prototype=Object.create(o.prototype)).constructor=r).prototype.connect=function(){this.connection=new a(this.url,this.protocol,void 0,this.headers,this.requestOptions,this.clientConfig),this._addSocketListeners()},r.prototype._onMessage=function(e){var t=this;this._parseResponse("string"==typeof e.data?e.data:"").forEach((function(e){var n;e.method&&-1!==e.method.indexOf("_subscription")?t.emit(t.DATA,e):(n=e.id,Array.isArray(e)&&(n=e[0].id),t.responseQueue.has(n)&&(void 0!==t.responseQueue.get(n).callback&&t.responseQueue.get(n).callback(!1,e),t.responseQueue.delete(n)))}))},r.prototype._onConnect=function(){var e;this.emit(this.CONNECT),this.reconnectAttempts=0,this.reconnecting=!1,0<this.requestQueue.size&&(e=this).requestQueue.forEach((function(t,n){e.send(t.payload,t.callback),e.requestQueue.delete(n)}))},r.prototype._onClose=function(e){var t=this;!this.reconnectOptions.auto||[1e3,1001].includes(e.code)&&!1!==e.wasClean?(this.emit(this.CLOSE,e),0<this.requestQueue.size&&this.requestQueue.forEach((function(n,r){n.callback(i.ConnectionNotOpenError(e)),t.requestQueue.delete(r)})),0<this.responseQueue.size&&this.responseQueue.forEach((function(n,r){n.callback(i.InvalidConnection("on WS",e)),t.responseQueue.delete(r)})),this._removeSocketListeners(),this.removeAllListeners()):this.reconnect()},r.prototype._addSocketListeners=function(){this.connection.addEventListener("message",this._onMessage.bind(this)),this.connection.addEventListener("open",this._onConnect.bind(this)),this.connection.addEventListener("close",this._onClose.bind(this))},r.prototype._removeSocketListeners=function(){this.connection.removeEventListener("message",this._onMessage),this.connection.removeEventListener("open",this._onConnect),this.connection.removeEventListener("close",this._onClose)},r.prototype._parseResponse=function(e){var t=this,n=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(e){t.lastChunk&&(e=t.lastChunk+e);var r=null;try{r=JSON.parse(e)}catch(r){return t.lastChunk=e,clearTimeout(t.lastChunkTimeout),void(t.lastChunkTimeout=setTimeout((function(){t.reconnectOptions.auto&&t.reconnectOptions.onTimeout?t.reconnect():(t.emit(t.ERROR,i.ConnectionTimeout(t._customTimeout)),0<t.requestQueue.size&&t.requestQueue.forEach((function(e,n){e.callback(i.ConnectionTimeout(t._customTimeout)),t.requestQueue.delete(n)})))}),t._customTimeout))}clearTimeout(t.lastChunkTimeout),t.lastChunk=null,r&&n.push(r)})),n},r.prototype.send=function(e,t){var n=e.id;t={payload:e,callback:t};if(Array.isArray(e)&&(n=e[0].id),this.connection.readyState===this.connection.CONNECTING||this.reconnecting)this.requestQueue.set(n,t);else{if(this.connection.readyState!==this.connection.OPEN)return this.requestQueue.delete(n),this.emit(this.ERROR,i.ConnectionNotOpenError()),void t.callback(i.ConnectionNotOpenError());this.responseQueue.set(n,t),this.requestQueue.delete(n);try{this.connection.send(JSON.stringify(t.payload))}catch(e){t.callback(e),this.responseQueue.delete(n)}}},r.prototype.reset=function(){this.responseQueue.clear(),this.requestQueue.clear(),this.removeAllListeners(),this._removeSocketListeners(),this._addSocketListeners()},r.prototype.disconnect=function(e,t){this._removeSocketListeners(),this.connection.close(e||1e3,t)},r.prototype.supportsSubscriptions=function(){return!0},r.prototype.reconnect=function(){var e=this;this.reconnecting=!0,0<this.responseQueue.size&&this.responseQueue.forEach((function(t,n){t.callback(i.PendingRequestsOnReconnectingError()),e.responseQueue.delete(n)})),!this.reconnectOptions.maxAttempts||this.reconnectAttempts<this.reconnectOptions.maxAttempts?setTimeout((function(){e.reconnectAttempts++,e._removeSocketListeners(),e.emit(e.RECONNECT,e.reconnectAttempts),e.connect()}),this.reconnectOptions.delay):(this.emit(this.ERROR,i.MaxAttemptsReachedOnReconnectingError()),this.reconnecting=!1,0<this.requestQueue.size&&this.requestQueue.forEach((function(t,n){t.callback(i.MaxAttemptsReachedOnReconnectingError()),e.requestQueue.delete(n)})))},e.exports=r},9886:function(e,t,n){"use strict";function r(){var e=this,t=(o.packageInit(this,arguments),this.setRequestManager),n=(this.setRequestManager=function(n){return t(n),e.net.setRequestManager(n),!0},this.setProvider);this.setProvider=function(){n.apply(e,arguments),e.setRequestManager(e._requestManager)},this.net=new a(this),[new s({name:"subscribe",type:"shh",subscriptions:{messages:{params:1}}}),new i({name:"getVersion",call:"shh_version",params:0}),new i({name:"getInfo",call:"shh_info",params:0}),new i({name:"setMaxMessageSize",call:"shh_setMaxMessageSize",params:1}),new i({name:"setMinPoW",call:"shh_setMinPoW",params:1}),new i({name:"markTrustedPeer",call:"shh_markTrustedPeer",params:1}),new i({name:"newKeyPair",call:"shh_newKeyPair",params:0}),new i({name:"addPrivateKey",call:"shh_addPrivateKey",params:1}),new i({name:"deleteKeyPair",call:"shh_deleteKeyPair",params:1}),new i({name:"hasKeyPair",call:"shh_hasKeyPair",params:1}),new i({name:"getPublicKey",call:"shh_getPublicKey",params:1}),new i({name:"getPrivateKey",call:"shh_getPrivateKey",params:1}),new i({name:"newSymKey",call:"shh_newSymKey",params:0}),new i({name:"addSymKey",call:"shh_addSymKey",params:1}),new i({name:"generateSymKeyFromPassword",call:"shh_generateSymKeyFromPassword",params:1}),new i({name:"hasSymKey",call:"shh_hasSymKey",params:1}),new i({name:"getSymKey",call:"shh_getSymKey",params:1}),new i({name:"deleteSymKey",call:"shh_deleteSymKey",params:1}),new i({name:"newMessageFilter",call:"shh_newMessageFilter",params:1}),new i({name:"getFilterMessages",call:"shh_getFilterMessages",params:1}),new i({name:"deleteMessageFilter",call:"shh_deleteMessageFilter",params:1}),new i({name:"post",call:"shh_post",params:1,inputFormatter:[null]}),new i({name:"unsubscribe",call:"shh_unsubscribe",params:1})].forEach((function(t){t.attachToObject(e),t.setRequestManager(e._requestManager)}))}var o=n(92928),s=n(96602).subscriptions,i=n(93952),a=n(11324);r.prototype.clearSubscriptions=function(){this._requestManager.clearSubscriptions()},o.addProviders(r),e.exports=r}}]);